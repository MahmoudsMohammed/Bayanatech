<div class="collection pb-4">
  <app-navigator [title]="title"></app-navigator>
  <div class="flex gap-2 flex-wrap items-end">
    <div class="max-w-xs flex-grow">
      <label class="col-form-label"> {{ "Customer" | translate }}</label>
      <ng-select
        class="w-full p-0"
        placeholder="{{ 'Chose' | translate }}"
        [(ngModel)]="select.selected"
        (ngModelChange)="getCustomersAccount($event)"
        [ngModelOptions]="{ standalone: true }"
      >
        <ng-option
          *ngFor="let customer of select.mobileSelect"
          [value]="customer"
          >{{ customer.Name }}</ng-option
        >
      </ng-select>
    </div>
    <button
      class="btn btn-primary"
      (click)="data.filter.enable = !data.filter.enable"
      [translate]="'name'"
      [translateParams]="{
        ar: 'فلترة بالوقت',
        en: 'Time Filter'
      }"
    ></button>
    <div class="form-group timeInput" *ngIf="data.filter.enable">
      <input
        placeholder="{{ 'Chose Date' | translate }}"
        [(ngModel)]="data.filter.date"
        type="text"
        class="form-control"
        bsDaterangepicker
        #dpr="bsDaterangepicker"
      />
    </div>
  </div>
  <div class="flex justify-between gap-2 items-center my-3 flex-wrap">
    <div class="w-fit">
      <input
        class="form-control"
        placeholder="{{ 'search' | translate }}"
        #input
      />
    </div>
    <div class="flex gap-2 controler flex-wrap">
      <button class="flex gap-1 btn btn-primary">
        <span>
          {{ "Print" | translate }}
        </span>
        <i class="fa-solid fa-print"></i>
      </button>
    </div>
  </div>
  <div class="overflow-auto">
    <table
      mat-table
      [dataSource]="data.data"
      matSort
      class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max"
    >
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <span
            [translate]="'name'"
            [translateParams]="{
              ar: 'اسم العميل',
              en: 'Customer Name'
            }"
          ></span>
        </th>
        <td mat-cell *matCellDef="let element">{{ element.CustomerName }}</td>
        <td mat-footer-cell *matFooterCellDef class="bg-light">
          {{ "total" | translate }}
        </td>
      </ng-container>

      <ng-container matColumnDef="mobile">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <span
            [translate]="'name'"
            [translateParams]="{
              ar: 'رقم الجوال',
              en: 'Customer Mobile'
            }"
          ></span>
        </th>
        <td mat-cell *matCellDef="let element">{{ element.CustomerMobile }}</td>
        <td mat-footer-cell *matFooterCellDef class="bg-light"></td>
      </ng-container>

      <ng-container matColumnDef="total">
        <th
          class="bg-blue-100"
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
        >
          <span
            class="text-blue-900"
            [translate]="'name'"
            [translateParams]="{
              ar: 'المبلغ الكلي',
              en: 'Total Value'
            }"
          ></span>
        </th>
        <td
          class="bg-blue-100 text-blue-900 text-center"
          mat-cell
          *matCellDef="let element"
        >
          {{ element.TotalValue }}
        </td>

        <td mat-footer-cell *matFooterCellDef class="bg-light">3,800.1</td>
      </ng-container>

      <ng-container matColumnDef="paid">
        <th
          class="bg-green-100"
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
        >
          <span
            class="text-green-900"
            [translate]="'name'"
            [translateParams]="{
              ar: 'المبلغ المدفوع',
              en: 'Paid Amount'
            }"
          ></span>
        </th>
        <td
          class="bg-green-100 text-green-900 text-center"
          mat-cell
          *matCellDef="let element"
        >
          {{ element.TotalPaidPayment }}
        </td>

        <td mat-footer-cell *matFooterCellDef class="bg-light">3,800.1</td>
      </ng-container>

      <ng-container matColumnDef="remain">
        <th
          class="bg-red-100"
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
        >
          <span
            class="text-red-900"
            [translate]="'name'"
            [translateParams]="{
              ar: 'المبلغ المتبقي',
              en: 'Remaining Amount'
            }"
          ></span>
        </th>
        <td
          class="bg-red-100 text-red-900 text-center"
          mat-cell
          *matCellDef="let element"
        >
          {{ element.TotalRemainingPayment }}
        </td>

        <td mat-footer-cell *matFooterCellDef class="bg-light">61,479.9</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

      <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>

      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        class="duration-300 hover:bg-slate-100"
      ></tr>
      <!-- Row shown when there is no matching data. -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">
          {{ "No result found for " }} "{{ input.value }}"
        </td>
      </tr>
    </table>
  </div>
  <mat-paginator [pageSizeOptions]="[10, 25]"> </mat-paginator>
</div>
