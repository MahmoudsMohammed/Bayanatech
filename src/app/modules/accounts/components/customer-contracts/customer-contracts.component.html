<div class="customer-contracts">
  <app-navigator [title]="title"></app-navigator>

  <div class="head flex gap-2 flex-wrap items-end justify-between">
    <div class="btns mb-3 w-100">
      <!-- all inputs  -->
      <div class="row flex flex-wrap">
        <div class="col-lg-3 col-md-4 col-sm-5 mb-0 mb-md-3">
          <div class="form-group timeInput">
            <label class="col-form-label">
              {{ "Chose Date" | translate }}</label
            >
            <input
              placeholder="{{ 'Chose Date' | translate }}"
              name="date"
              ngModel
              type="text"
              class="form-control"
              bsDaterangepicker
              #dpr="bsDaterangepicker"
            />
          </div>
        </div>

        <div class="col-lg-3 col-md-4 col-sm-5 mt-0 mb-0 mb-md-3">
          <div class="form-group">
            <label class="col-form-label"> {{ "search" | translate }}</label>

            <input type="text " class="w-full p-2 inputType" name="search" />
          </div>
        </div>

        <div class="col-lg-3 col-md-4 col-sm-5 mt-0 mb-0 mb-md-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "project manager" | translate }}</label
            >

            <ng-select
              class="p-0 w-full"
              placeholder="{{ 'Chose' | translate }}"
              ngModel
              name="project manager"
            >
              <ng-option *ngFor="let user of users" [value]="user.id">{{
                user.Name
              }}</ng-option>
            </ng-select>
          </div>
        </div>

        <div class="col-lg-3 col-md-4 col-sm-5 my-sm-3 mb-md-3">
          <div class="form-check form-switch position-relative w-100 mt-4 mb-2">
            <input
              class="form-check-input position-absolute me-0"
              type="checkbox"
              role="switch"
              id="flexSwitchCheckDefault"
            />

            <label
              class="form-check-label position-absolute me-5"
              for="flexSwitchCheckDefault"
              style="width: max-content"
            >
              {{ "ShowAllContracts" | translate }}
            </label>
          </div>
        </div>
      </div>

      <!-- all buttons  -->
      <div class="row flex flex-wrap">
        <button
          type="button"
          class="flex gap-1 btn bg-base text-white mb-3 col-md-2"
          (click)="open(contractChoseModal, null, 'contracts')"
        >
          {{ "ContractsSaudi" | translate }}
        </button>

        <button
          type="button"
          class="btn btn-outline-secondary mb-3 col-md-2"
          routerLink="/customers/search"
        >
          {{ "New customer" | translate }}
        </button>

        <button
          type="button"
          class="btn btn-outline-success mb-3 col-md-2"
          routerLink="/accounts/Service_prices"
        >
          {{ "Service prices" | translate }}
        </button>

        <button
          type="button"
          class="btn bg-base text-white mb-3 col-md-2"
          (click)="
            open(newContractModal, { type: 'newContract' }, 'newContract')
          "
        >
          {{ "contractPayments" | translate }}
        </button>

        <button
          type="button"
          class="btn bg-base text-white mb-3 col-md-2"
          (click)="
            open(newContractModal, { type: 'Installments' }, 'Installments')
          "
        >
          {{ "ContractInstallments" | translate }}
        </button>

        <button type="button" class="btn btn-secondary mb-3 col-md-2">
          {{ "Print" | translate }}
        </button>
        <button
          type="button"
          class="btn bg-base text-white mb-3 col-md-2"
          (click)="open(draftFormsModal)"
        >
          {{ "draftForms" | translate }}
        </button>
      </div>
    </div>

    <!-- table -->
    <div class="overflow-auto mt-4 w-full">
      <table
        mat-table
        [dataSource]="projectsDataSource"
        matSort
        class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max"
      >
        <ng-container matColumnDef="contractNumber">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span>{{ "contract number" | translate }}</span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.contractNumber }}
          </td>
        </ng-container>

        <ng-container matColumnDef="ContractDate">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span>{{ "Date of contract" | translate }}</span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.ContractDate }}
          </td>
        </ng-container>

        <ng-container matColumnDef="totalAfterTax">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span>{{ "totalAfterTax" | translate }}</span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.totalAfterTax }}
          </td>
        </ng-container>

        <ng-container matColumnDef="customerName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span>{{ "customer name" | translate }}</span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.customerName }}
          </td>
        </ng-container>

        <ng-container matColumnDef="ProjectNameDes">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span>{{ "Project name/description" | translate }}</span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.ProjectNameDes }}
          </td>
        </ng-container>

        <ng-container matColumnDef="ProjectNumber">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span>{{ "Project Number" | translate }}</span>
          </th>
          <td
            class="bg-red-100 text-red-950 text-center"
            mat-cell
            *matCellDef="let element"
          >
            {{ element.ProjectNumber }}
          </td>
        </ng-container>

        <ng-container matColumnDef="PaidAmount">
          <th
            class="bg-green-100"
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
          >
            <span class="text-green-900">{{ "Paid Amount" | translate }}</span>
          </th>
          <td
            class="bg-green-100 text-green-950 text-center"
            mat-cell
            *matCellDef="let element"
          >
            {{ element.PaidAmount }}
          </td>
        </ng-container>

        <ng-container matColumnDef="RemainingAmount">
          <th
            class="bg-red-100"
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
          >
            <span class="text-red-900">{{
              "Remaining Amount" | translate
            }}</span>
          </th>
          <td
            class="bg-red-100 text-red-950 text-center"
            mat-cell
            *matCellDef="let element"
          >
            {{ element.RemainingAmount }}
          </td>
        </ng-container>

        <ng-container matColumnDef="operations">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span>{{ "operations" | translate }}</span>
          </th>
          <td mat-cell *matCellDef="let element">
            <div dropdown>
              <button type="button " id="button-basic" dropdownToggle>
                <i class="fa-solid fa-ellipsis-vertical"></i>
              </button>

              <div
                id="dropdown-basic"
                *dropdownMenu
                aria-labelledby="dropdownBasic1"
                class="child flex align-items-center justify-center"
              >
                <div class="child-btns">
                  <span class="dtr-data">
                    <!--الغاء العقد  -->
                    <button
                      type="button"
                      id="68"
                      class="AddNewTaskbtn btn btn-outline-danger btn-sm waves-effect"
                      data-toggle="tooltip"
                      data-placement="top"
                      title=" الغاء العقد "
                      data-original-title="الغاء العقد "
                      (click)="open(deleteModal)"
                    >
                      <i class="fa-solid fa-xmark"></i>
                    </button>
                    <!--تفاصيل الدفعات  -->
                    <button
                      type="button"
                      id="68"
                      class="AddNewTaskbtn btn btn-outline-warning btn-sm waves-effect"
                      data-toggle="tooltip"
                      data-placement="top"
                      title=" تفاصيل الدفعات "
                      data-original-title="تفاصيل الدفعات "
                      (click)="
                        open(PaymentsDetailsModal, null, 'PaymentsDetails')
                      "
                    >
                      <i class="fa-solid fa-circle-info"></i>
                    </button>
                    <!--مسودات العقد   -->
                    <button
                      type="button"
                      id="68"
                      class="AddNewTaskbtn btn btn-outline-warning btn-sm waves-effect"
                      data-toggle="tooltip"
                      data-placement="top"
                      title=" مسودات العقد  "
                      data-original-title="مسودات العقد  "
                      (click)="
                        open(newContractModal, { type: 'drafts' }, 'drafts')
                      "
                    >
                      <i class="fa-solid fa-file-contract"></i>
                    </button>
                    <!-- رفع العقد المختوم -->
                    <button
                      type="button"
                      id="68"
                      class="AddNewTaskbtn btn btn-outline-danger btn-sm waves-effect"
                      data-toggle="tooltip"
                      data-placement="top"
                      title="  رفع العقد المختوم"
                      data-original-title=" رفع العقد المختوم"
                      (click)="
                        open(UploadModal, { type: 'contract' }, 'contract')
                      "
                    >
                      <i class="fa-solid fa-ban"></i>
                    </button>
                    <!-- "    طباعة" -->
                    <button
                      type="button"
                      id="68"
                      class="EditProjectPhasesTasks btn btn-outline-success btn-sm waves-effect"
                      data-toggle="tooltip"
                      data-placement="top"
                      title="    طباعة"
                      data-original-title="  طباعة"
                    >
                      <i class="fa-solid fa-print"></i>
                    </button>
                    <!-- ="   تعديل القيمة" -->
                    <button
                      type="button"
                      id="68"
                      class="EditProjectPhasesTasks btn btn-outline-warning btn-sm waves-effect"
                      data-toggle="tooltip"
                      data-placement="top"
                      title="   تعديل القيمة"
                      data-original-title="   تعديل القيمة"
                      (click)="open(ContractValueModal, null, 'ContractValue')"
                    >
                      <i class="fa-regular fa-pen-to-square"></i>
                    </button>
                    <!-- ="  طباعة العقد" -->
                    <button
                      type="button"
                      id="68"
                      class="current-tasks btn btn-outline-success btn-sm waves-effect"
                      data-toggle="tooltip"
                      data-placement="top"
                      title="  طباعة العقد"
                      data-original-title="  طباعة العقد"
                    >
                      <i class="fa-solid fa-print"></i>
                    </button>
                    <!-- e="    ارفاق ملحق " -->
                    <button
                      type="button"
                      id="68"
                      class="project-workers btn btn-outline-success btn-sm waves-effect"
                      data-toggle="tooltip"
                      data-placement="top"
                      title="    ارفاق ملحق "
                      data-original-title="    ارفاق ملحق "
                      (click)="open(UploadModal, { type: 'file' }, 'file')"
                    >
                      <i class="fa-solid fa-plus"></i>
                    </button>
                    <!--   طباعة عقد الهيئة السعودية الهندسية  -->
                    <button
                      type="button"
                      id="68"
                      class="EditProjectPhasesTasks btn btn-outline-success btn-sm waves-effect"
                      data-toggle="tooltip"
                      data-placement="top"
                      title="   طباعة عقد الهيئة السعودية الهندسية"
                      data-original-title="   طباعة عقد الهيئة السعودية الهندسية"
                    >
                      <i class="fa-solid fa-print"></i>
                    </button>
                  </span>
                </div>
              </div>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="projectDisplayedColumns"></tr>

        <tr mat-row *matRowDef="let row; columns: projectDisplayedColumns"></tr>
      </table>
    </div>
    <mat-paginator [pageSizeOptions]="[10, 25]"> </mat-paginator>
  </div>

  <!-- #### -->

  <!-- draftFormsModal  -->
  <ng-template #draftFormsModal let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl">{{ "LinkDraftProject" | translate }}</span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal?.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <div class="modal-body">
      <div class="row align-items-center">
        <div class="col-12 mb-0 mb-md-3 me-3">
          <p class="w-auto alert alert-danger">{{ "NoteDraft" | translate }}</p>
          <div class="upload">
            <file-upload [control]="control">
              <ng-template
                let-isFileDragDropAvailable="isFileDragDropAvailable"
                #placeholder
              >
                <div *ngIf="control.size === 0">
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      height="1em"
                      viewBox="0 0 640 512"
                    >
                      <path
                        d="M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39V392c0 13.3 10.7 24 24 24s24-10.7 24-24V257.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z"
                      />
                    </svg>
                  </div>
                </div>
              </ng-template>

              <ng-template
                let-i="index"
                let-file="file"
                let-control="control"
                #item
              >
                <div class="overlay">
                  <span
                    class="delete-button"
                    (click)="control.removeFile(file)"
                  >
                    <svg viewBox="0 0 448 512">
                      <path
                        d="M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"
                      ></path>
                    </svg>
                  </span>
                  <img *ngIf="control.valid" [src]="uploadedFile | async" />
                </div>
              </ng-template>
            </file-upload>
          </div>
        </div>
        <div class="col-xxl-6 col-md-5 mb-0 mb-md-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "invoice number" | translate }}</label
            >
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              ngModel
              name="user"
            >
              <ng-option *ngFor="let user of users" [value]="user.id">{{
                user.Name
              }}</ng-option>
            </ng-select>
          </div>
        </div>

        <div class="col-xxl-6 col-md-5 mb-0 mb-md-3">
          <div class="form-group timeInput">
            <label class="col-form-label">{{
              "date reminder" | translate
            }}</label>
            <input
              placeholder="{{ 'date reminder' | translate }}"
              name="date"
              ngModel
              type="text"
              class="form-control"
              bsDatepicker
              #dpr="bsDatepicker"
            />
          </div>
        </div>
      </div>
    </div>

    <div class="flex justify-end p-3">
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "close" | translate }}
      </button>

      <button
        class="btn text-white me-2"
        style="background-color: var(--base-color)"
      >
        {{ "LinkDraftProject" | translate }}
      </button>
    </div>
  </ng-template>

  <!-- deleteModal -->
  <ng-template #deleteModal let-modal>
    <div class="modal-body text-center">
      <p
        [translate]="'name'"
        [translateParams]="{
          ar: 'هل تريد حذف هذا العنصر ؟',
          en: 'Do you want to delete this item?'
        }"
      ></p>
      <div class="flex gap-2 justify-center">
        <button
          type="button"
          (click)="modal.dismiss()"
          mat-raised-button
          color="basic"
        >
          {{ "close" | translate }}
        </button>

        <button
          type="button"
          mat-raised-button
          color="warn"
          (click)="confirm(); modal.dismiss()"
        >
          {{ "confirem" | translate }}
        </button>
      </div>
    </div>
  </ng-template>

  <!-- PaymentsDetailsModal  -->
  <ng-template #PaymentsDetailsModal let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl">{{ "clientPayments" | translate }}</span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal?.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <div class="modal-body">
      <ng-container>
        <form class="" #smsForm="ngForm">
          <div class="row align-items-end mb-4 mx-3">
            <div class="col-md-4 col-sm-5 mb-0 mb-sm-3">
              <div class="form-group">
                <label
                  for="contract number"
                  class="text-right col-form-label block"
                >
                  {{ "contract number" | translate }}
                </label>
                <input
                  required
                  placeholder="{{ 'contract number' | translate }}"
                  class="form-control"
                  type="text"
                  value="AQSAT1"
                  disabled
                />
              </div>
            </div>

            <div class="col-md-4 col-sm-5 mb-0 mb-sm-3">
              <div class="form-group">
                <label
                  for="Customer Name"
                  class="text-right col-form-label block"
                >
                  {{ "Customer Name" | translate }}
                </label>
                <input
                  required
                  placeholder="{{ 'Customer Name' | translate }}"
                  class="form-control"
                  type="text"
                  value="يوسف(VIP)"
                  disabled
                />
              </div>
            </div>

            <div class="col-md-4 col-sm-5 mb-0 mb-sm-3">
              <div class="form-group">
                <label
                  for="Project Number"
                  class="text-right col-form-label block"
                >
                  {{ "Project Number" | translate }}
                </label>
                <input
                  required
                  placeholder="{{ 'Project Number' | translate }}"
                  class="form-control"
                  type="text"
                  value="2022-13"
                  disabled
                />
              </div>
            </div>

            <div class="col-md-4 col-sm-5 mb-0 mb-sm-3">
              <div class="form-group">
                <label
                  for="Paid Amount"
                  class="text-right col-form-label block"
                >
                  {{ "Paid Amount" | translate }}
                </label>
                <input
                  required
                  placeholder="{{ 'Paid Amount' | translate }}"
                  class="form-control bg-green"
                  type="text"
                  disabled
                  value="690"
                />
              </div>
            </div>

            <div class="col-md-4 col-sm-5 mb-0 mb-sm-3">
              <div class="form-group">
                <label
                  for="Remaining Amount"
                  class="text-right col-form-label block"
                >
                  {{ "Remaining Amount" | translate }}
                </label>
                <input
                  required
                  placeholder="{{ 'Remaining Amount' | translate }}"
                  class="form-control bg-red"
                  type="text"
                  disabled
                  value="960"
                />
              </div>
            </div>

            <div class="col-md-4 col-sm-5 mb-0 mb-sm-3">
              <p class="w-auto text-success fw-bold">
                {{ "Excluding tax" | translate }}
              </p>
            </div>

            <button
              type="button"
              class="flex gap-1 btn btn-success mb-3 col-md-2"
              (click)="open(AddPaymentsModal)"
            >
              {{ "AddPayments" | translate }}
              <i class="fa-solid fa-plus"></i>
            </button>

            <div class="col-xl-2 col-md-3 col-sm-4 mb-0 mb-sm-3">
              <p class="alert alert-secondary text-success w-auto fw-bold p-2">
                10 شهر 3 يوم
              </p>
            </div>

            <div class="col-xl-3 col-md-4 col-sm-5 mb-0 mb-sm-3">
              <div class="form-group">
                <label for="from" class="text-right col-form-label block">
                  {{ "from" | translate }}
                </label>
                <input
                  placeholder="{{ 'Chose' | translate }}"
                  name="date"
                  readonly
                  type="text"
                  value="08/01/2023"
                  class="form-control"
                  bsDatepicker
                  #dpr="bsDatepicker"
                />
              </div>
            </div>

            <div class="col-xl-2 col-md-3 col-sm-4 mb-0 mb-sm-3">
              <p class="alert alert-danger w-auto fw-bold p-2">مشروع متاخر</p>
            </div>

            <div class="col-xl-3 col-md-4 col-sm-5 mb-0 mb-sm-3">
              <div class="form-group">
                <label for="to" class="text-right col-form-label block">
                  {{ "to" | translate }}
                </label>
                <input
                  placeholder="{{ 'Chose' | translate }}"
                  name="date"
                  readonly
                  type="text"
                  value="08/01/2023"
                  class="form-control"
                  bsDatepicker
                  #dpr="bsDatepicker"
                />
              </div>
            </div>
          </div>

          <div class="row mb-3">
            <div class="editable shadow mb-4" style="overflow: auto">
              <table
                class="table table-responsive table-striped table-bordered text-center"
                style="
                  vertical-align: middle;
                  font-size: 14px;
                  min-width: max-content;
                "
              >
                <thead
                  class="bg-base text-white"
                  style="line-height: 30px; font-size: 13px"
                >
                  <tr>
                    <th>{{ "batch number" | translate }}</th>
                    <th>{{ "date" | translate }}</th>
                    <th>{{ "the amount" | translate }}</th>
                    <th>{{ "Tax" | translate }}</th>
                    <th>{{ "amountAfterTax" | translate }}</th>
                    <th>{{ "PaymentStatus" | translate }}</th>
                    <th>{{ "Options" | translate }}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr
                    *ngFor="let item of users; let i = index"
                    style="line-height: 5px"
                  >
                    <td>{{ item.id }}</td>

                    <td>
                      <input
                        type="text"
                        name="os-name{{ i }}"
                        [(ngModel)]="item.Name"
                        ngModel
                      />
                    </td>

                    <td>
                      <input
                        type="text"
                        name="os-name{{ i }}"
                        [(ngModel)]="item.Name"
                        ngModel
                      />
                    </td>

                    <td>
                      <input
                        type="text"
                        name="os-name{{ i }}"
                        [(ngModel)]="item.Name"
                        ngModel
                      />
                    </td>

                    <td>
                      <input
                        type="text"
                        name="os-name{{ i }}"
                        [(ngModel)]="item.Name"
                        ngModel
                      />
                    </td>

                    <td>
                      <input
                        type="text"
                        name="os-name{{ i }}"
                        [(ngModel)]="item.Name"
                        ngModel
                      />
                    </td>

                    <td class="d-flex justify-content-between">
                      <button
                        class="p-2 bg-yellow-100 hover:bg-yellow-500 rounded-lg duration-300 hover:text-white w-10"
                        (click)="open(AddPaymentsModal)"
                      >
                        <i class="fa-regular fa-pen-to-square"></i>
                      </button>
                      <button
                        class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                      >
                        <i class="fa-solid fa-trash-can"></i>
                      </button>

                      <!-- "    طباعة" -->
                      <button
                        type="button"
                        id="68"
                        class="EditProjectPhasesTasks btn btn-outline-success btn-sm waves-effect"
                        data-toggle="tooltip"
                        data-placement="top"
                        title="    طباعة"
                        data-original-title="  طباعة"
                      >
                        <i class="fa-solid fa-print"></i>
                      </button>

                      <!-- "طباعة مبسطة" -->
                      <button
                        type="button"
                        id="68"
                        class="EditProjectPhasesTasks btn btn-outline-success btn-sm waves-effect"
                        data-toggle="tooltip"
                        data-placement="top"
                        title="طباعة مبسطة"
                        data-original-title="طباعة مبسطة"
                      >
                        <i class="fa-solid fa-print"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </form>

        <!-- footer -->
      </ng-container>

      <div class="d-flex justify-content-end">
        <div class="pt-3 m-3">
          <button (click)="modal?.dismiss()" class="btn btn-secondary">
            {{ "close" | translate }}
          </button>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- AddPaymentsModal  -->
  <ng-template #AddPaymentsModal let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl">{{ "AddNewBatch" | translate }}</span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal?.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <div class="modal-body">
      <ng-container>
        <form class="" #smsForm="ngForm">
          <div class="row align-items-end mb-4 mx-3">
            <div class="col-md-4 col-sm-5 mb-0 mb-sm-3">
              <div class="form-group">
                <label
                  for="batch number"
                  class="text-right col-form-label block"
                >
                  {{ "batch number" | translate }}
                </label>
                <input
                  required
                  placeholder="{{ 'batch number' | translate }}"
                  class="form-control"
                  type="text"
                  value="2"
                  readonly
                />
              </div>
            </div>

            <div class="col-md-4 col-sm-5 mb-0 mb-sm-3">
              <div class="form-group">
                <label for="date" class="text-right col-form-label block">
                  {{ "date" | translate }}
                </label>
                <input
                  placeholder="{{ 'Chose' | translate }}"
                  name="date"
                  readonly
                  type="text"
                  value="08/01/2023"
                  class="form-control"
                  bsDatepicker
                  #dpr="bsDatepicker"
                />
              </div>
            </div>

            <div class="col-md-4 col-sm-5 mb-0 mb-sm-3">
              <div class="form-group">
                <label
                  for="Corresponding"
                  class="text-right col-form-label block"
                >
                  {{ "Corresponding" | translate }}
                </label>
                <input
                  placeholder="{{ 'Chose' | translate }}"
                  name="date"
                  readonly
                  type="text"
                  value="08/01/2023"
                  class="form-control"
                  bsDatepicker
                  #dpr="bsDatepicker"
                />
              </div>
            </div>

            <div class="col-md-4 col-sm-5 mb-0 mb-sm-3">
              <div class="form-group">
                <label for="the amount" class="text-right col-form-label block">
                  {{ "the amount" | translate }}
                </label>
                <input
                  required
                  placeholder="{{ 'the amount' | translate }}"
                  class="form-control"
                  type="text"
                />
              </div>
            </div>

            <div class="col-md-4 col-sm-5 mb-0 mb-sm-3">
              <div class="form-group">
                <label
                  for="installmentTax"
                  class="text-right col-form-label block"
                >
                  {{ "installmentTax" | translate }}
                </label>
                <input
                  required
                  placeholder="{{ 'installmentTax' | translate }}"
                  class="form-control"
                  type="text"
                />
              </div>
            </div>

            <div class="col-md-4 col-sm-5 mb-0 mb-sm-3">
              <div class="form-group">
                <label
                  for="contract number"
                  class="text-right col-form-label block"
                >
                  {{ "contract number" | translate }}
                </label>
                <input
                  required
                  placeholder="{{ 'contract number' | translate }}"
                  class="form-control"
                  type="text"
                  value="0.00"
                />
              </div>
            </div>

            <div class="col-md-4 col-sm-5 mb-0 mb-sm-3">
              <div class="form-group">
                <label
                  for="finalAmountWriting"
                  class="text-right col-form-label block"
                >
                  {{ "finalAmountWriting" | translate }}
                </label>
                <input
                  required
                  placeholder="{{ 'finalAmountWriting' | translate }}"
                  class="form-control"
                  type="text"
                  value="0.00"
                />
              </div>
            </div>
          </div>
        </form>
        <!-- footer -->
      </ng-container>
      <div class="d-flex justify-content-end">
        <div class="pt-3">
          <button (click)="modal?.dismiss()" class="btn btn-secondary">
            {{ "close" | translate }}
          </button>
        </div>
        <div class="pt-3 mx-3">
          <button class="btn bg-base text-white">
            {{ "save" | translate }}
          </button>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- contractChoseModal -->
  <ng-template #contractChoseModal let-modal>
    <div class="modal-body text-center">
      <p
        [translate]="'name'"
        [translateParams]="{
          ar: 'عقود الهيئة السعودية للمهندسين ',
          en: 'Contracts of the Saudi Council of Engineers'
        }"
      ></p>

      <div class="flex items-center justify-center w-100 my-3 gap-8">
        <button
          type="button"
          class="btn bg-base text-white"
          [translate]="'name'"
          [translateParams]="{
            ar: 'عقد استشاري',
            en: 'Consultant contract'
          }"
          (click)="
            open(
              EngineeringContractModal,
              { type: 'ConsultantContract' },
              'ConsultantContract'
            )
          "
        ></button>
        <button
          type="button"
          class="btn bg-base text-white"
          [translate]="'name'"
          [translateParams]="{
            ar: 'عقد إشراف',
            en: 'supervision contract'
          }"
          (click)="
            open(
              EngineeringContractModal,
              { type: 'supervisionContract' },
              'supervisionContract'
            )
          "
        ></button>
        <button
          type="button"
          class="btn bg-base text-white"
          [translate]="'name'"
          [translateParams]="{
            ar: 'عقد تصميم',
            en: 'design contract'
          }"
          (click)="
            open(
              EngineeringContractModal,
              { type: 'designContract' },
              'designContract'
            )
          "
        ></button>
      </div>

      <div class="flex gap-2 justify-center mt-3">
        <button
          type="button"
          (click)="modal.dismiss()"
          mat-raised-button
          color="basic"
        >
          {{ "close" | translate }}
        </button>
      </div>
    </div>
  </ng-template>

  <!-- UploadModal -->
  <ng-template #UploadModal let-modal>
    <div class="modal-body text-center">
      <p
        *ngIf="modalDetails?.type === 'contract'"
        [translate]="'name'"
        [translateParams]="{
          ar: 'رفع العقد المختوم',
          en: 'Lifting the sealed contract'
        }"
      ></p>

      <p
        *ngIf="modalDetails?.type === 'file'"
        [translate]="'name'"
        [translateParams]="{
          ar: 'ارفاق ملف',
          en: 'Attach a file'
        }"
      ></p>

      <div class="flex items-center justify-center w-100 my-3 gap-8">
        <div class="upload w-100">
          <file-upload [control]="control" style="min-height: 300px">
            <ng-template
              let-isFileDragDropAvailable="isFileDragDropAvailable"
              #placeholder
            >
              <div *ngIf="control.size === 0">
                <div class="icon">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    height="1em"
                    viewBox="0 0 640 512"
                  >
                    <path
                      d="M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39V392c0 13.3 10.7 24 24 24s24-10.7 24-24V257.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z"
                    />
                  </svg>
                </div>

                <div
                  class="upload-text"
                  style="width: max-content; padding: 0px 20px"
                >
                  {{ "chooseFile" | translate }}
                </div>
              </div>
            </ng-template>

            <ng-template
              let-i="index"
              let-file="file"
              let-control="control"
              #item
            >
              <div class="overlay">
                <span class="delete-button" (click)="control.removeFile(file)">
                  <svg viewBox="0 0 448 512">
                    <path
                      d="M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"
                    ></path>
                  </svg>
                </span>
                <img *ngIf="control.valid" [src]="uploadedFile | async" />
              </div>
            </ng-template>
          </file-upload>
        </div>
      </div>

      <div class="flex gap-2 justify-center mt-3">
        <button
          type="button"
          (click)="modal.dismiss()"
          mat-raised-button
          color="basic"
        >
          {{ "close" | translate }}
        </button>

        <button
          type="button"
          mat-raised-button
          color="basic"
          class="bg-base text-white"
        >
          {{ "save" | translate }}
        </button>
      </div>
    </div>
  </ng-template>

  <!-- ContractValueModal  -->
  <ng-template #ContractValueModal let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl">{{ "ModifyContractValue" | translate }}</span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal?.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <div class="modal-body">
      <ng-container>
        <form class="" #smsForm="ngForm">
          <!-- ++++ -->
          <div class="row mb-3">
            <h3 class="flex items-center justify-start fw-bold">
              <button
                type="button "
                class="add-btn mx-2"
                (click)="addStage(stage?.length)"
              >
                <i class="fa fa-plus"></i>
              </button>
            </h3>
            <div class="editable shadow mb-4">
              <table
                class="table table-responsive table-striped table-bordered text-center"
                style="vertical-align: middle; font-size: 14px"
              >
                <thead
                  class="bg-base text-white"
                  style="line-height: 30px; font-size: 13px"
                >
                  <tr>
                    <th>{{ "serviceNumber" | translate }}</th>
                    <th>{{ "ServiceName" | translate }}</th>
                    <th>{{ "Unit" | translate }}</th>
                    <th>{{ "Quantity" | translate }}</th>
                    <th>{{ "price" | translate }}</th>
                    <th>{{ "VATTax" | translate }}</th>
                    <th>{{ "Net_taxes" | translate }}</th>
                    <th>{{ "action" | translate }}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr
                    *ngFor="let item of stage; let i = index"
                    style="line-height: 5px"
                  >
                    <td>
                      <input
                        type="text"
                        name="amount{{ i }}"
                        [(ngModel)]="item.amount"
                        ngModel
                      />
                    </td>

                    <td>
                      <input
                        type="text"
                        name="amount{{ i }}"
                        [(ngModel)]="item.amount"
                        ngModel
                      />
                    </td>

                    <td>
                      <input
                        type="text"
                        name="amount{{ i }}"
                        [(ngModel)]="item.amount"
                        ngModel
                      />
                    </td>

                    <td>
                      <input
                        type="text"
                        name="amount{{ i }}"
                        [(ngModel)]="item.amount"
                        ngModel
                      />
                    </td>

                    <td>
                      <input
                        type="text"
                        name="amount{{ i }}"
                        [(ngModel)]="item.amount"
                        ngModel
                      />
                    </td>

                    <td>
                      <input
                        type="text"
                        name="Statement{{ i }}"
                        [(ngModel)]="item.Statement"
                        ngModel
                      />
                    </td>
                    <td>
                      <input
                        type="text"
                        name="referenceNumber{{ i }}"
                        [(ngModel)]="item.referenceNumber"
                        ngModel
                      />
                    </td>

                    <td class="d-flex justify-content-between">
                      <button
                        class="p-2 bg-yellow-100 hover:bg-yellow-500 rounded-lg duration-300 hover:text-white w-10"
                        (click)="open(DetailsServiceModal)"
                      >
                        <i class="fa-solid fa-circle-info"></i>
                      </button>

                      <button
                        class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                        (click)="deleteEmployee(i)"
                      >
                        <i class="fa-solid fa-trash-can"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="boxContainer w-80 py-3 px-3">
            <div class="row">
              <div class="col-md-2">
                <label for="tax type" class=" " for="tax type">
                  {{ "tax type" | translate }}
                </label>
              </div>
              <div class="col-md-10">
                <ng-select
                  class="w-100"
                  placeholder="{{ 'Chose' | translate }}"
                  name="include_tax"
                >
                  <ng-option [value]="0">{{
                    "Excluding tax" | translate
                  }}</ng-option>
                  <ng-option [value]="1">{{
                    "Taxes included" | translate
                  }}</ng-option>
                </ng-select>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="col-md-2">
                  <label
                    for="Total amount"
                    class="text-gren"
                    for="Total amount"
                  >
                    {{ "Total amount" | translate }}
                  </label>
                </div>
                <div class="col-md-10">
                  <input
                    id="Total amount"
                    required
                    value="148500.00"
                    class="form-control text-center"
                    type="number"
                    disabled
                    value="0"
                  />
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="col-md-2">
                  <label
                    for="total in writing"
                    class="text-orange"
                    for="total in writing"
                  >
                    {{ "total in writing" | translate }}
                  </label>
                </div>
                <div class="col-md-10">
                  <input
                    id="total in writing"
                    required
                    class="form-control text-center"
                    type="number"
                    value="0"
                    disabled
                  />
                </div>
              </div>
            </div>
          </div>
        </form>

        <!-- footer -->
      </ng-container>

      <div class="d-flex justify-content-end">
        <div class="pt-3 mx-3">
          <button
            class="btn text-white"
            style="background-color: var(--base-color)"
          >
            {{ "save" | translate }}
          </button>
        </div>

        <div class="pt-3">
          <button (click)="modal?.dismiss()" class="btn btn-secondary">
            {{ "close" | translate }}
          </button>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- التفاصيل المقدمة للخدمة-->
  <!-- DetailsServiceModal -->
  <ng-template #DetailsServiceModal let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span>{{ "serviceDetails" | translate }}</span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div>
      <div class="header d-flex justify-content-center">
        <h2 class="text-center w-fit p-3 bg-blue-300 mt-3">
          {{ "ExtractingEnergy" | translate }}
        </h2>
      </div>
      <div class="body w-fit me-3">
        <i class="fa-solid fa-check" style="color: #10e090"></i>
        <span class="bg-blue-100 p-2 mx-2"> undefined </span>
      </div>
    </div>

    <div class="flex justify-end p-3">
      <button class="btn me-2 bg-base text-white" (click)="modal?.dismiss()">
        {{ "close" | translate }}
      </button>
    </div>
  </ng-template>

  <!-- newContractModal -->
  <ng-template #newContractModal let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4
        *ngIf="modalDetails.type == 'newContract'"
        class="m-0"
        [translate]="'name'"
        [translateParams]="{
          ar: 'عقد جديد دفعات',
          en: 'New contract payments'
        }"
      ></h4>

      <h4
        *ngIf="modalDetails.type == 'Installments'"
        class="m-0"
        [translate]="'name'"
        [translateParams]="{
          ar: 'عقد جديد معالج أقساط ',
          en: 'New Contract Wizard Installments'
        }"
      ></h4>

      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal?.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <div class="modal-body text-center">
      <div class="content">
        <mat-stepper #stepper linear>
          <mat-step [stepControl]="firstFormGroup">
            <form [formGroup]="firstFormGroup">
              <ng-template matStepLabel>{{
                "Contract data" | translate
              }}</ng-template>
              <div class="step-content">
                <div class="row align-items-end mb-4">
                  <div class="col-sm-6 col-md-4 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="contractNo"
                        class="text-right col-form-label block"
                      >
                        {{ "contract number" | translate }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="contractNo"
                        name="contractNo"
                        formControlName="contractNo"
                      />
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-4 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label for="date" class="text-right col-form-label block">
                        {{ "Date of contract" | translate }}
                      </label>
                      <input
                        class="form-control"
                        type="text"
                        id="date"
                        name="date"
                        formControlName="date"
                        bsDatepicker
                      />
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-4 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="dateHijri"
                        class="text-right col-form-label block"
                      >
                        {{ "Contract date (Hijri) *" | translate }}
                      </label>
                      <hijri-gregorian-datepicker
                        [(selectedDate)]="selectedDate"
                        [isRequired]="true"
                        [hijriLabel]="'Hijri'"
                        [selectedDateType]="selectedDateType"
                        [dir]="'dir' | translate"
                      >
                      </hijri-gregorian-datepicker>
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-6 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="office"
                        class="text-right col-form-label block"
                      >
                        {{
                          "The first party / the name of the office" | translate
                        }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="office"
                        name="office"
                        formControlName="office"
                      />
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-3 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label class="text-right col-form-label block">
                        {{ "and represents it" | translate }}</label
                      >
                      <ng-select
                        class="w-full p-0"
                        placeholder="{{ 'Chose' | translate }}"
                        name="represents"
                        formControlName="represents"
                      >
                        <ng-option
                          *ngFor="let user of users"
                          [value]="user.id"
                          >{{ user.Name }}</ng-option
                        >
                      </ng-select>
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-3 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label for="as" class="text-right col-form-label block">
                        {{ "as" | translate }}
                      </label>
                      <input
                        class="form-control"
                        type="text"
                        id="as"
                        name="as"
                        formControlName="as"
                      />
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-6 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="customer"
                        class="text-right col-form-label block"
                      >
                        {{ "The second party / customer" | translate }}
                      </label>
                      <input
                        class="form-control"
                        type="text"
                        id="customer"
                        name="customer"
                        formControlName="customer"
                      />
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-3 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label class="text-right col-form-label block">
                        {{ "The project" | translate }}</label
                      >
                      <ng-select
                        class="w-full p-0"
                        placeholder="{{ 'Chose' | translate }}"
                        name="project"
                        formControlName="project"
                      >
                        <ng-option
                          *ngFor="let user of users"
                          [value]="user.id"
                          >{{ user.Name }}</ng-option
                        >
                      </ng-select>
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-3 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="iDNumber"
                        class="text-right col-form-label block"
                      >
                        {{ "ID Number" | translate }}
                      </label>
                      <input
                        class="form-control"
                        type="text"
                        id="iDNumber"
                        name="iDNumber"
                        formControlName="iDNumber"
                      />
                    </div>
                  </div>

                  <div class="col-sm-6 col-md-3 mb-0 mb-sm-3">
                    <label
                      for="iDNumber"
                      class="text-right col-form-label block"
                    >
                      {{ "Activate bid services" | translate }}
                    </label>
                    <div class="form-types checkbox justify-start mt-2">
                      <div class="checkbox-content relative">
                        <!-- [checked]="item.status == 2" -->
                        <input
                          type="checkbox"
                          name="check"
                          formControlName="check"
                          (change)="setOfferPriceChecked($event)"
                        />
                        <div
                          class="box {{
                            offerPriceChecked ? 'checked' : 'blur'
                          }}"
                        >
                          <span class="absolute">{{ "Yes" | translate }}</span>
                          <span class="absolute">{{ "No" | translate }}</span>
                          <div class="cycle"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    *ngIf="offerPriceChecked"
                    class="col-sm-6 col-md-3 mb-0 mb-sm-3"
                  >
                    <div class="form-group">
                      <label class="col-form-label block">
                        {{ "Offer Price" | translate }}</label
                      >
                      <ng-select
                        class="w-full p-0"
                        placeholder="{{ 'Chose' | translate }}"
                        name="offerPrice"
                        formControlName="offerPrice"
                      >
                        <ng-option
                          *ngFor="let user of users"
                          [value]="user.id"
                          >{{ user.Name }}</ng-option
                        >
                      </ng-select>
                    </div>
                  </div>
                </div>
              </div>
              <div class="d-flex justify-end w-100">
                <button mat-button matStepperNext class="bg-base text-white">
                  {{ "Next" | translate }}
                </button>
              </div>
              <p
                class="bg-red-100 p-1"
                style="width: max-content; margin: 15px auto"
              >
                {{
                  "The second party: only clients who have projects appear"
                    | translate
                }}
              </p>
            </form>
          </mat-step>

          <mat-step [stepControl]="secondFormGroup">
            <form #form="ngForm">
              <ng-template matStepLabel>{{
                "Financial details" | translate
              }}</ng-template>
              <div class="step-content">
                <div class="row mb-3">
                  <h3 class="flex items-center justify-start fw-bold">
                    {{ "services" | translate }}
                    <button
                      type="button "
                      class="add-btn mx-2"
                      (click)="addService(offerServices?.length)"
                    >
                      <i class="fa fa-plus"></i>
                    </button>
                  </h3>

                  <div
                    class="editable shadow mb-4 d-block"
                    style="overflow: auto"
                  >
                    <table
                      class="table table-responsive table-striped table-bordered text-center"
                      style="
                        vertical-align: middle;
                        font-size: 14px;
                        min-width: max-content;
                      "
                    >
                      <thead
                        class="bg-base text-white"
                        style="line-height: 30px; font-size: 13px"
                      >
                        <tr>
                          <th>{{ "ServiceNo" | translate }}</th>
                          <th>{{ "ServiceName" | translate }}</th>
                          <th>{{ "Unit" | translate }}</th>
                          <th>{{ "Quantity" | translate }}</th>
                          <th>{{ "price" | translate }}</th>
                          <th>{{ "VATTax" | translate }}</th>
                          <th>{{ "netTax" | translate }}</th>
                          <th>{{ "action" | translate }}</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr
                          *ngFor="let item of offerServices; let i = index"
                          style="line-height: 5px"
                        >
                          <td>{{ item.id }}</td>
                          <td
                            (click)="
                              open(servicesListModal, null, 'servicesList', i)
                            "
                          >
                            <input
                              type="text"
                              name="os-name{{ i }}"
                              [(ngModel)]="item.name"
                              ngModel
                            />
                          </td>
                          <td>
                            <input
                              type="text"
                              name="os-unit{{ i }}"
                              [(ngModel)]="item.unit"
                            />
                          </td>

                          <td>
                            <input
                              type="text"
                              name="os-amount{{ i }}"
                              [(ngModel)]="item.amount"
                            />
                          </td>

                          <td>
                            <input
                              type="number"
                              name="os-price{{ i }}"
                              [(ngModel)]="item.price"
                            />
                          </td>

                          <td>
                            <input
                              type="number"
                              name="os-vatTax{{ i }}"
                              [(ngModel)]="item.vatTax"
                            />
                          </td>
                          <td>
                            <input
                              type="number"
                              name="os-taxes{{ i }}"
                              [(ngModel)]="item.taxes"
                            />
                          </td>
                          <td>
                            <button
                              title=""
                              class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                              style="margin-inline-end: 6px"
                              (click)="
                                open(
                                  serviceDetailsModal,
                                  item,
                                  'serviceDetails'
                                )
                              "
                            >
                              <i class="fa-solid fa-info"></i>
                            </button>
                            <button
                              class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                              (click)="deleteService(i)"
                            >
                              <i class="fa-solid fa-trash-can"></i>
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                  <div class="box-info">
                    <div class="max-w-full">
                      <label for="include_tax">{{
                        "tax type" | translate
                      }}</label>
                      <ng-select
                        class="p-0"
                        placeholder="{{ 'Chose' | translate }}"
                        name="include_tax"
                        formControlName="include_tax"
                      >
                        <ng-option [value]="0">{{
                          "Excluding tax" | translate
                        }}</ng-option>
                        <ng-option [value]="1">{{
                          "Taxes included" | translate
                        }}</ng-option>
                      </ng-select>
                    </div>

                    <div>
                      <label for="total_amount">{{
                        "Total amount" | translate
                      }}</label>
                      <input
                        type="number"
                        id="total_amount"
                        name="total_amount"
                        class="form-control"
                      />
                    </div>

                    <div>
                      <label for="total_amount_text">{{
                        "total in writing" | translate
                      }}</label>
                      <input
                        type="text"
                        id="total_amount_text"
                        name="total_amount_text"
                        class="form-control"
                      />
                    </div>
                  </div>
                </div>

                <div class="row mb-3">
                  <h3 class="flex items-center justify-start fw-bold">
                    {{ "Add a new item" | translate }}
                    <button
                      type="button "
                      class="add-btn mx-2"
                      (click)="addBand(bands?.length)"
                    >
                      <i class="fa fa-plus"></i>
                    </button>
                  </h3>

                  <div
                    class="table editable shadow d-block"
                    style="overflow: auto"
                  >
                    <table
                      class="table table-responsive table-striped table-bordered text-center"
                      style="
                        vertical-align: middle;
                        font-size: 14px;
                        min-width: max-content;
                      "
                    >
                      <thead
                        class="bg-base text-white"
                        style="line-height: 30px; font-size: 13px"
                      >
                        <tr>
                          <th>{{ "no" | translate }}</th>
                          <th>{{ "clause" | translate }}</th>
                          <th>{{ "action" | translate }}</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr
                          *ngFor="let item of bands; let i = index"
                          style="line-height: 5px"
                        >
                          <td>
                            <input
                              type="text"
                              name="op-statement{{ i }}"
                              [(ngModel)]="item.clauseId"
                              ngModel
                            />
                          </td>
                          <td>
                            <input
                              type="text"
                              name="op-statementEn{{ i }}"
                              [(ngModel)]="item.clause"
                            />
                          </td>
                          <td>
                            <button
                              class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                              (click)="deleteBand(i)"
                            >
                              <i class="fa-solid fa-trash-can"></i>
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <div
                  *ngIf="modalDetails.type == 'Installments'"
                  class="row mb-3"
                >
                  <h3 class="flex items-center justify-start fw-bold">
                    {{ "Installments Details" | translate }}
                    <button
                      type="button "
                      class="add-btn mx-2"
                      (click)="open(addInstallmentModal)"
                    >
                      <i class="fa fa-plus"></i>
                    </button>
                  </h3>
                  <!-- table -->
                  <div class="overflow-auto mt-3">
                    <table
                      class="min-w-max overflow-hidden rounded-t-lg table table-bordered table-striped"
                    >
                      <thead>
                        <tr class="bg-base text-white">
                          <th class="uppercase text-center">
                            {{ "batch number" | translate }}
                          </th>
                          <th class="uppercase text-center">
                            {{ "Batch date" | translate }}
                          </th>
                          <th class="uppercase text-center">
                            {{ "Batch Date (Hijri)" | translate }}
                          </th>
                          <th class="uppercase text-center">
                            {{ "the amount" | translate }}
                          </th>
                          <th class="uppercase text-center">
                            {{ "Tax" | translate }}
                          </th>
                          <th class="uppercase text-center">
                            {{ "Payment total" | translate }}
                          </th>
                        </tr>
                      </thead>
                      <tbody id="tabledetails">
                        <tr
                          class="text-black text-center"
                          *ngFor="let installment of installments"
                        >
                          <td>{{ installment.batchNumber }}</td>
                          <td>{{ installment.BatchDate }}</td>
                          <td>{{ installment.BatchDateHijri }}</td>
                          <td>{{ installment.amount }}</td>
                          <td>{{ installment.Tax }}</td>
                          <td>{{ installment.total }}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>

              <div class="d-flex w-100 justify-between items-center">
                <button
                  mat-button
                  matStepperPrevious
                  class="btn btn-outline-secondary"
                >
                  {{ "Previous" | translate }}
                </button>
                <button
                  mat-button
                  matStepperNext
                  class="btn bg-base text-white"
                >
                  {{ "Next" | translate }}
                </button>
              </div>
            </form>
          </mat-step>

          <mat-step [stepControl]="thredFormGroup">
            <form [formGroup]="secondFormGroup">
              <ng-template matStepLabel>{{
                "operating expenses" | translate
              }}</ng-template>
              <div class="step-content"></div>
              <div class="row mb-3">
                <h3 class="flex items-center justify-start fw-bold">
                  {{ "Add participant" | translate }}
                  <button
                    type="button "
                    class="add-btn mx-2"
                    (click)="addParticipant(participants?.length)"
                  >
                    <i class="fa fa-plus"></i>
                  </button>
                </h3>

                <div class="table editable shadow">
                  <table
                    class="table table-responsive table-striped table-bordered text-center"
                    style="vertical-align: middle; font-size: 14px"
                  >
                    <thead
                      class="bg-base text-white"
                      style="line-height: 30px; font-size: 13px"
                    >
                      <tr>
                        <th>{{ "EmployeeName" | translate }}</th>
                        <th>{{ "Duration" | translate }}</th>
                        <th>{{ "Employee percentage" | translate }}</th>
                        <th>{{ "employee salary" | translate }}</th>
                        <th>{{ "expected cost" | translate }}</th>
                        <th>{{ "operations" | translate }}</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr
                        *ngFor="let item of participants; let i = index"
                        style="line-height: 5px"
                      >
                        <td>
                          <ng-select
                            class="w-full p-0"
                            placeholder="{{ 'Chose' | translate }}"
                            [(ngModel)]="modalDetails.employeeName"
                            [ngModelOptions]="{ standalone: true }"
                            name="op-employeeName{{ i }}"
                          >
                            <ng-option
                              *ngFor="let user of users"
                              [value]="user.id"
                              >{{ user.Name }}</ng-option
                            >
                          </ng-select>
                        </td>
                        <td>
                          <input
                            type="text"
                            name="op-duration{{ i }}"
                            [(ngModel)]="item.duration"
                          />
                        </td>
                        <td>
                          <div class="flex">
                            <input
                              type="number"
                              class="form-control"
                              [(ngModel)]="item.percentage"
                            />
                            <div
                              class="flex justify-center items-center bg-neutral-200 p-2 rounded-lg aspect-square"
                            >
                              %
                            </div>
                          </div>
                        </td>
                        <td>
                          <input
                            type="text"
                            name="op-salary{{ i }}"
                            [(ngModel)]="item.salary"
                          />
                        </td>
                        <td>
                          <input
                            type="text"
                            name="op-cost{{ i }}"
                            [(ngModel)]="item.cost"
                          />
                        </td>
                        <td>
                          <button
                            class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                            (click)="deleteParticipant(i)"
                          >
                            <i class="fa-solid fa-trash-can"></i>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="row mb-3">
                <h3 class="flex items-center justify-start fw-bold">
                  {{
                    "Through the data and preliminary reading of the project"
                      | translate
                  }}
                </h3>

                <div class="table editable shadow">
                  <table
                    class="table table-responsive table-striped table-bordered text-center"
                    style="vertical-align: middle; font-size: 14px"
                  >
                    <thead
                      class="bg-base text-white"
                      style="line-height: 30px; font-size: 13px"
                    >
                      <tr>
                        <th>{{ "Project duration" | translate }}</th>
                        <th>{{ "Operating Expenses" | translate }}</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr style="line-height: 5px">
                        <td>casc</td>
                        <td>vdvs</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="flex justify-between items-center flex-wrap">
                <button
                  mat-button
                  matStepperPrevious
                  class="btn btn-outline-secondary"
                >
                  {{ "Previous" | translate }}
                </button>
                <button
                  mat-button
                  matStepperNext
                  class="btn bg-base text-white"
                  (click)="addContract()"
                >
                  {{ "confirem" | translate }}
                </button>
              </div>
            </form>
          </mat-step>

          <mat-step>
            <ng-template matStepLabel>{{
              "Contract draft" | translate
            }}</ng-template>
            <div class="step-content">
              <p
                class="bg-red-100 p-1"
                style="width: max-content; margin: 10px auto"
              >
                {{
                  "Through the data and preliminary reading of the project"
                    | translate
                }}
              </p>

              <div class="periority my-5">
                <mat-radio-group aria-label="Select an option" name="status">
                  <div class="flex flex-wrap gap-8 items-center my-1">
                    <mat-radio-button value="1" class="text-base">{{
                      "File Name" | translate
                    }}</mat-radio-button>

                    <div class="operations flex gap-2">
                      <button
                        class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                      >
                        <i class="fa fa-download"></i>
                      </button>
                      <button
                        class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                      >
                        <i class="fa-solid fa-trash-can"></i>
                      </button>
                    </div>
                  </div>
                  <div class="flex flex-wrap gap-8 items-center my-1">
                    <mat-radio-button value="2" class="text-base">{{
                      "File Name" | translate
                    }}</mat-radio-button>

                    <div class="operations flex gap-2">
                      <button
                        class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                      >
                        <i class="fa fa-download"></i>
                      </button>
                      <button
                        class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                      >
                        <i class="fa-solid fa-trash-can"></i>
                      </button>
                    </div>
                  </div>
                </mat-radio-group>
              </div>
            </div>
            <div class="flex justify-start mt-2">
              <button
                mat-button
                matStepperPrevious
                class="btn btn-outline-secondary"
              >
                {{ "Previous" | translate }}
              </button>
            </div>
          </mat-step>
        </mat-stepper>
      </div>

      <div class="flex gap-2 justify-end mt-3">
        <button
          type="button"
          (click)="modal.dismiss()"
          mat-raised-button
          color="primary"
        >
          {{ "close" | translate }}
        </button>
      </div>
    </div>
  </ng-template>

  <!-- servicesListModal -->
  <ng-template #servicesListModal let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl">{{ "servicesList" | translate }}</span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body">
      <mat-form-field class="w-full">
        <mat-label>{{ "search" | translate }}</mat-label>
        <input matInput (keyup)="applyFilterServiceList($event)" #input />
      </mat-form-field>

      <div class="table">
        <table
          mat-table
          [dataSource]="serviceListDataSource"
          class="mat-elevation-z8 table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>
              {{ "ServiceName" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">{{ element.name }}</td>
          </ng-container>

          <!-- price Column -->
          <ng-container matColumnDef="price">
            <th mat-header-cell *matHeaderCellDef>{{ "price" | translate }}</th>
            <td mat-cell *matCellDef="let element">{{ element.price }}</td>
          </ng-container>

          <tr
            mat-header-row
            *matHeaderRowDef="servicesListdisplayedColumns"
          ></tr>
          <tr
            mat-row
            *matRowDef="
              let row;
              let i = index;
              columns: servicesListdisplayedColumns
            "
            (click)="setServiceRowValue(i); modal.dismiss()"
          ></tr>

          <!-- Row shown when there is no matching data. -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="4">
              {{ "noResult" | translate }} "{{ input.value }}"
            </td>
          </tr>
        </table>
      </div>

      <div class="text-end mt-2">
        <button (click)="modal?.dismiss()" class="btn btn-secondary">
          {{ "Back" | translate }}
        </button>
      </div>
    </div>
  </ng-template>

  <!-- serviceDetails -->
  <ng-template #serviceDetailsModal let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl">{{ "serviceDetails" | translate }}</span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body">
      <ul class="service_item_details">
        <li *ngFor="let item of serviceDetails.items">
          <i class="fa fa-check text-success"></i>
          <span class="text-base mx-2">{{ item?.name }}</span>
        </li>
      </ul>
      <div
        class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
      >
        <button (click)="modal?.dismiss()" class="btn btn-secondary">
          {{ "Back" | translate }}
        </button>
      </div>
    </div>
  </ng-template>

  <!-- addInstallment -->
  <ng-template #addInstallmentModal let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl">{{ "AddInstallments" | translate }}</span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body">
      <form #form="ngForm">
        <div class="row">
          <div class="col-md-6 col-lg-3 mb-3">
            <div class="form-group">
              <label
                for="ContractAmount"
                class="text-right col-form-label block"
              >
                {{ "Contract amount" | translate }}
              </label>
              <input
                ngModel
                class="form-control"
                type="number"
                id="ContractAmount"
                name="ContractAmount"
              />
            </div>
          </div>

          <div class="col-md-6 col-lg-3 mb-3">
            <div class="form-group">
              <label class="text-right col-form-label block">
                {{ "The beginning of the installments" | translate }}
              </label>
              <div class="form-group timeInput">
                <input
                  ngModel
                  name="installmentsStartDate"
                  type="text"
                  class="form-control"
                  bsDatepicker
                />
              </div>
            </div>
          </div>

          <div class="col-md-6 col-lg-3 mb-3">
            <div class="form-group">
              <label class="text-right col-form-label block">
                {{ "Start of installments (Hijri)" | translate }}
              </label>
              <div class="form-group">
                <hijri-gregorian-datepicker
                  [(selectedDate)]="selectedDate"
                  [hijriLabel]="'Hijri'"
                  [selectedDateType]="selectedDateType"
                  [dir]="'dir' | translate"
                >
                </hijri-gregorian-datepicker>
              </div>
            </div>
          </div>

          <div class="col-md-6 col-lg-3 mb-3">
            <div class="form-group">
              <label for="payment" class="text-right col-form-label block">
                {{ "Down payment value" | translate }}
              </label>
              <input
                ngModel
                class="form-control"
                type="number"
                id="payment"
                name="payment"
              />
            </div>
          </div>

          <div class="periority mt-4 mb-2">
            <label for="payment" class="text-right col-form-label block">
              {{ "Basis for payment" | translate }}
            </label>

            <mat-radio-group
              class="flex gap-4"
              aria-label="Select an option"
              name="status"
            >
              <mat-radio-button value="1" class="text-warning">{{
                "Georgie" | translate
              }}</mat-radio-button>
              <mat-radio-button value="2" class="text-success">{{
                "Hijri" | translate
              }}</mat-radio-button>
            </mat-radio-group>
          </div>

          <div class="periority mt-4 mb-2">
            <label for="payment" class="text-right col-form-label block">
              {{ "Method of Payment" | translate }}
            </label>

            <mat-radio-group
              class="flex gap-4"
              aria-label="Select an option"
              name="status"
            >
              <mat-radio-button value="1" class="text-warning">{{
                "Monthly" | translate
              }}</mat-radio-button>
              <mat-radio-button value="2" class="text-success">{{
                "by duration" | translate
              }}</mat-radio-button>
              <mat-radio-button value="3" class="text-danger">{{
                "period with the month" | translate
              }}</mat-radio-button>
            </mat-radio-group>
          </div>

          <div class="periority mt-4 mb-2">
            <label for="payment" class="text-right col-form-label block">
              {{ "Installment calculation method" | translate }}
            </label>

            <mat-radio-group
              class="flex gap-4"
              aria-label="Select an option"
              name="status"
            >
              <mat-radio-button value="1" class="text-warning">{{
                "Depending on the number of installments" | translate
              }}</mat-radio-button>
              <mat-radio-button value="2" class="text-success">{{
                "Depending on the premium value" | translate
              }}</mat-radio-button>
            </mat-radio-group>
          </div>

          <div class="col-md-6 col-lg-4 mb-3">
            <div class="form-group">
              <label
                for="monthlyInstallment"
                class="text-right col-form-label block"
              >
                {{ "monthly installment" | translate }}
              </label>
              <input
                ngModel
                class="form-control"
                type="number"
                id="monthlyInstallment"
                name="monthlyInstallment"
              />
            </div>
          </div>

          <div class="col-md-6 col-lg-4 mb-3">
            <div class="form-group">
              <label
                for="numberOfInstallments"
                class="text-right col-form-label block"
              >
                {{ "number of installments" | translate }}
              </label>
              <input
                ngModel
                class="form-control"
                type="number"
                id="numberOfInstallments"
                name="numberOfInstallments"
              />
            </div>
          </div>

          <div class="col-md-6 col-lg-4 mb-3">
            <div class="form-group">
              <label
                for="latestInstallment"
                class="text-right col-form-label block"
              >
                {{ "latest installment" | translate }}
              </label>
              <input
                ngModel
                class="form-control"
                type="number"
                id="latestInstallment"
                name="latestInstallment"
              />
            </div>
          </div>
        </div>
      </form>
      <div class="flex gap-2 pt-3 border-t border-neutral-300 justify-end">
        <button
          (click)="addInstallments(form.value); modal?.dismiss()"
          class="btn bg-base text-white"
        >
          {{ "confirem" | translate }}
        </button>

        <button (click)="modal?.dismiss()" class="btn btn-secondary">
          {{ "Back" | translate }}
        </button>
      </div>
    </div>
  </ng-template>

  <!-- _____________________ -->
  <!-- EngineeringContractModal -->
  <ng-template #EngineeringContractModal let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4
        *ngIf="modalDetails.type == 'ConsultantContract'"
        class="m-0"
        [translate]="'name'"
        [translateParams]="{
          ar: 'عقد أستشارات هندسية',
          en: 'Engineering consultancy contract'
        }"
      ></h4>
      <h4
        *ngIf="modalDetails.type == 'supervisionContract'"
        class="m-0"
        [translate]="'name'"
        [translateParams]="{
          ar: 'عقد إشراف ',
          en: 'supervision contract'
        }"
      ></h4>

      <h4
        *ngIf="modalDetails.type == 'designContract'"
        class="m-0"
        [translate]="'name'"
        [translateParams]="{
          ar: 'عقد تصميم',
          en: 'design contract'
        }"
      ></h4>

      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal?.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <div class="modal-body text-center">
      <div class="content">
        <mat-stepper linear #stepper>
          <!-- 1 -->
          <mat-step [stepControl]="FormGroup01">
            <ng-template matStepLabel>{{
              "Contract data" | translate
            }}</ng-template>
            <form [formGroup]="FormGroup01">
              <div class="step-content">
                <div class="row align-items-end mb-4">
                  <div class="col-sm-6 col-md-4 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="contractNo"
                        class="text-right col-form-label block"
                      >
                        {{ "contract number" | translate }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="contractNo"
                        name="contractNo"
                        formControlName="contractNo"
                      />
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-4 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label for="date" class="text-right col-form-label block">
                        {{ "Date of contract" | translate }}
                      </label>
                      <input
                        class="form-control"
                        type="text"
                        id="date"
                        name="date"
                        formControlName="date"
                        bsDatepicker
                      />
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-4 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="dateHijri"
                        class="text-right col-form-label block"
                      >
                        {{ "Contract date (Hijri) *" | translate }}
                      </label>
                      <hijri-gregorian-datepicker
                        [(selectedDate)]="selectedDate"
                        [isRequired]="true"
                        [hijriLabel]="'Hijri'"
                        [selectedDateType]="selectedDateType"
                        [dir]="'dir' | translate"
                      >
                      </hijri-gregorian-datepicker>
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-6 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="office"
                        class="text-right col-form-label block"
                      >
                        {{
                          "The first party / the name of the office" | translate
                        }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="office"
                        name="office"
                        formControlName="office"
                      />
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-3 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label class="text-right col-form-label block">
                        {{ "and represents it" | translate }}</label
                      >
                      <ng-select
                        class="w-full p-0"
                        placeholder="{{ 'Chose' | translate }}"
                        name="represents"
                        formControlName="represents"
                      >
                        <ng-option
                          *ngFor="let user of users"
                          [value]="user.id"
                          >{{ user.Name }}</ng-option
                        >
                      </ng-select>
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-3 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label for="as" class="text-right col-form-label block">
                        {{ "as" | translate }}
                      </label>
                      <input
                        class="form-control"
                        type="text"
                        id="as"
                        name="as"
                        formControlName="as"
                      />
                    </div>
                  </div>

                  <div class="col-sm-6 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="engineeringLicence"
                        class="text-right col-form-label block"
                      >
                        {{ "engineeringLicence" | translate }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="engineeringLicence"
                        name="engineeringLicence"
                        formControlName="engineeringLicence"
                      />
                    </div>
                  </div>
                  <div class="col-sm-6 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label for="date" class="text-right col-form-label block">
                        {{ "IssuedOn*" | translate }}
                      </label>
                      <input
                        class="form-control"
                        type="text"
                        id="date"
                        name="date"
                        formControlName="date"
                        bsDatepicker
                      />
                    </div>
                  </div>

                  <div class="col-sm-6 col-md-6 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="customer"
                        class="text-right col-form-label block"
                      >
                        {{ "The second party / customer" | translate }}
                      </label>
                      <input
                        class="form-control"
                        type="text"
                        id="customer"
                        name="customer"
                        formControlName="customer"
                      />
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-3 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label class="text-right col-form-label block">
                        {{ "The project" | translate }}</label
                      >
                      <ng-select
                        class="w-full p-0"
                        placeholder="{{ 'Chose' | translate }}"
                        name="project"
                        formControlName="project"
                      >
                        <ng-option
                          *ngFor="let user of users"
                          [value]="user.id"
                          >{{ user.Name }}</ng-option
                        >
                      </ng-select>
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-3 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="iDNumber"
                        class="text-right col-form-label block"
                      >
                        {{ "ID Number" | translate }}
                      </label>
                      <input
                        class="form-control"
                        type="text"
                        id="iDNumber"
                        name="iDNumber"
                        formControlName="iDNumber"
                      />
                    </div>
                  </div>

                  <div
                    *ngIf="offerPriceChecked"
                    class="col-sm-6 col-md-3 mb-0 mb-sm-3"
                  >
                    <div class="form-group">
                      <label class="col-form-label block">
                        {{ "Offer Price" | translate }}</label
                      >
                      <ng-select
                        class="w-full p-0"
                        placeholder="{{ 'Chose' | translate }}"
                        name="offerPrice"
                        formControlName="offerPrice"
                      >
                        <ng-option
                          *ngFor="let user of users"
                          [value]="user.id"
                          >{{ user.Name }}</ng-option
                        >
                      </ng-select>
                    </div>
                  </div>
                </div>
              </div>
              <div class="d-flex justify-end w-100">
                <button mat-button matStepperNext class="bg-base text-white">
                  {{ "Next" | translate }}
                </button>
              </div>
            </form>
          </mat-step>
          <!-- 2 -->
          <mat-step [stepControl]="FormGroup02">
            <form [formGroup]="FormGroup02">
              <ng-template matStepLabel>{{
                "DesignServices" | translate
              }}</ng-template>
              <div class="step-content">
                <div class="row mb-3">
                  <div class="col-12 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="invoiceRegistered"
                        class="text-right col-form-label block"
                      >
                        {{ "invoiceRegistered" | translate }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="invoiceRegistered"
                        name="invoiceRegistered"
                        formControlName="invoiceRegistered"
                      />
                    </div>
                  </div>

                  <h3 class="flex items-center justify-start fw-bold">
                    {{ "services" | translate }}
                    <button
                      type="button "
                      class="add-btn mx-2"
                      (click)="addService(offerServices?.length)"
                    >
                      <i class="fa fa-plus"></i>
                    </button>
                  </h3>

                  <div
                    class="editable shadow mb-4 d-block"
                    style="overflow: auto"
                  >
                    <table
                      class="table table-responsive table-striped table-bordered text-center"
                      style="
                        vertical-align: middle;
                        font-size: 14px;
                        min-width: max-content;
                      "
                    >
                      <thead
                        class="bg-base text-white"
                        style="line-height: 30px; font-size: 13px"
                      >
                        <tr>
                          <th>{{ "ServiceNo" | translate }}</th>
                          <th>{{ "ServiceName" | translate }}</th>
                          <th>{{ "Unit" | translate }}</th>
                          <th>{{ "Quantity" | translate }}</th>
                          <th>{{ "price" | translate }}</th>
                          <th>{{ "VATTax" | translate }}</th>
                          <th>{{ "netTax" | translate }}</th>
                          <th>{{ "action" | translate }}</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr
                          *ngFor="let item of offerServices; let i = index"
                          style="line-height: 5px"
                        >
                          <td>{{ item.id }}</td>
                          <td
                            (click)="
                              open(servicesListModal, null, 'servicesList', i)
                            "
                          >
                            <input
                              type="text"
                              name="os-name{{ i }}"
                              [(ngModel)]="item.name"
                              ngModel
                            />
                          </td>
                          <td>
                            <input
                              type="text"
                              name="os-unit{{ i }}"
                              [(ngModel)]="item.unit"
                            />
                          </td>

                          <td>
                            <input
                              type="text"
                              name="os-amount{{ i }}"
                              [(ngModel)]="item.amount"
                            />
                          </td>

                          <td>
                            <input
                              type="number"
                              name="os-price{{ i }}"
                              [(ngModel)]="item.price"
                            />
                          </td>

                          <td>
                            <input
                              type="number"
                              name="os-vatTax{{ i }}"
                              [(ngModel)]="item.vatTax"
                            />
                          </td>
                          <td>
                            <input
                              type="number"
                              name="os-taxes{{ i }}"
                              [(ngModel)]="item.taxes"
                            />
                          </td>
                          <td>
                            <button
                              title=""
                              class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                              style="margin-inline-end: 6px"
                              (click)="
                                open(
                                  serviceDetailsModal,
                                  item,
                                  'serviceDetails'
                                )
                              "
                            >
                              <i class="fa-solid fa-info"></i>
                            </button>
                            <button
                              class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                              (click)="deleteService(i)"
                            >
                              <i class="fa-solid fa-trash-can"></i>
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                  <div class="box-info">
                    <div>
                      <label for="include_tax">{{
                        "tax type" | translate
                      }}</label>
                      <ng-select
                        class="p-0"
                        placeholder="{{ 'Chose' | translate }}"
                        name="include_tax"
                        formControlName="include_tax"
                      >
                        <ng-option [value]="0">{{
                          "Excluding tax" | translate
                        }}</ng-option>
                        <ng-option [value]="1">{{
                          "Taxes included" | translate
                        }}</ng-option>
                      </ng-select>
                    </div>

                    <div>
                      <label for="total_amount">{{
                        "Total amount" | translate
                      }}</label>
                      <input
                        type="number"
                        id="total_amount"
                        name="total_amount"
                        formControlName="total_amount"
                        class="form-control"
                      />
                    </div>

                    <div>
                      <label for="total_amount_text">{{
                        "total in writing" | translate
                      }}</label>
                      <input
                        type="text"
                        id="total_amount_text"
                        name="total_amount_text"
                        formControlName="total_amount_text"
                        class="form-control"
                      />
                    </div>
                  </div>
                </div>

                <div *ngIf="contractWithInstallments" class="row mb-3">
                  <h3 class="flex items-center justify-start fw-bold">
                    {{ "Installments Details" | translate }}
                    <button
                      type="button "
                      class="add-btn mx-2"
                      (click)="open(addInstallmentModal)"
                    >
                      <i class="fa fa-plus"></i>
                    </button>
                  </h3>

                  <div class="overflow-auto mt-3">
                    <table
                      class="min-w-max overflow-hidden rounded-t-lg table table-bordered table-striped"
                    >
                      <thead>
                        <tr class="bg-base text-white">
                          <th class="uppercase text-center">
                            {{ "batch number" | translate }}
                          </th>
                          <th class="uppercase text-center">
                            {{ "Batch date" | translate }}
                          </th>
                          <th class="uppercase text-center">
                            {{ "Batch Date (Hijri)" | translate }}
                          </th>
                          <th class="uppercase text-center">
                            {{ "the amount" | translate }}
                          </th>
                          <th class="uppercase text-center">
                            {{ "Tax" | translate }}
                          </th>
                          <th class="uppercase text-center">
                            {{ "Payment total" | translate }}
                          </th>
                        </tr>
                      </thead>
                      <tbody id="tabledetails">
                        <tr
                          class="text-black text-center"
                          *ngFor="let installment of installments"
                        >
                          <td>{{ installment.batchNumber }}</td>
                          <td>{{ installment.BatchDate }}</td>
                          <td>{{ installment.BatchDateHijri }}</td>
                          <td>{{ installment.amount }}</td>
                          <td>{{ installment.Tax }}</td>
                          <td>{{ installment.total }}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>

              <div class="d-flex w-100 justify-between items-center">
                <button
                  mat-button
                  matStepperPrevious
                  class="btn btn-outline-secondary"
                >
                  {{ "Previous" | translate }}
                </button>
                <button
                  mat-button
                  matStepperNext
                  class="btn bg-base text-white"
                >
                  {{ "Next" | translate }}
                </button>
              </div>
            </form>
          </mat-step>
          <!-- 3 -->
          <mat-step [stepControl]="FormGroup03">
            <form [formGroup]="FormGroup03">
              <ng-template matStepLabel>{{
                "ContractDocuments" | translate
              }}</ng-template>
              <div class="step-content"></div>

              <div class="row align-items-end mb-4">
                <div class="col-sm-6 mb-0 mb-sm-3">
                  <div class="form-group">
                    <label
                      for="DateLetter"
                      class="text-right col-form-label block"
                    >
                      {{ "DateLetter*" | translate }}
                    </label>
                    <input
                      class="form-control"
                      type="text"
                      id="DateLetter"
                      name="DateLetter"
                      formControlName="DateLetter"
                      bsDatepicker
                    />
                  </div>
                </div>

                <div class="col-sm-6 mb-0 mb-sm-3">
                  <div class="form-group">
                    <label
                      for="serviceDate"
                      class="text-right col-form-label block"
                    >
                      {{ "serviceDate*" | translate }}
                    </label>
                    <input
                      class="form-control"
                      type="text"
                      id="serviceDate"
                      name="serviceDate"
                      formControlName="serviceDate"
                      bsDatepicker
                    />
                  </div>
                </div>

                <div class="flex items-center justify-center w-100 my-3 gap-8">
                  <div class="upload w-100">
                    <file-upload [control]="control">
                      <ng-template
                        let-isFileDragDropAvailable="isFileDragDropAvailable"
                        #placeholder
                      >
                        <div *ngIf="control.size === 0">
                          <div class="icon">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              height="1em"
                              viewBox="0 0 640 512"
                            >
                              <path
                                d="M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39V392c0 13.3 10.7 24 24 24s24-10.7 24-24V257.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z"
                              />
                            </svg>
                          </div>

                          <div
                            class="upload-text"
                            style="width: max-content; padding: 0px 20px"
                          >
                            {{ "chooseFile" | translate }}
                          </div>
                        </div>
                      </ng-template>

                      <ng-template
                        let-i="index"
                        let-file="file"
                        let-control="control"
                        #item
                      >
                        <div class="overlay">
                          <span
                            class="delete-button"
                            (click)="control.removeFile(file)"
                          >
                            <svg viewBox="0 0 448 512">
                              <path
                                d="M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"
                              ></path>
                            </svg>
                          </span>
                          <img
                            *ngIf="control.valid"
                            [src]="uploadedFile | async"
                          />
                        </div>
                      </ng-template>
                    </file-upload>
                  </div>
                </div>
              </div>

              <div class="flex justify-between items-center flex-wrap">
                <button
                  mat-button
                  matStepperPrevious
                  class="btn btn-outline-secondary"
                >
                  {{ "Previous" | translate }}
                </button>
                <button mat-button matStepperNext class="bg-base text-white">
                  {{ "Next" | translate }}
                </button>
              </div>
            </form>
          </mat-step>
          <!-- 4 -->
          <mat-step [stepControl]="FormGroup04">
            <form [formGroup]="FormGroup04">
              <ng-template matStepLabel>{{
                "ConditionsContract" | translate
              }}</ng-template>
              <div class="step-content">
                <p class="text-danger fw-bold text-decoration-underline">
                  {{ "project data" | translate }}
                </p>
                <div class="row align-items-end mb-4">
                  <div class="col-sm-6 col-md-3 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="ProjectName"
                        class="text-right col-form-label block"
                      >
                        {{ "Project Name" | translate }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="ProjectName"
                        name="ProjectName"
                        formControlName="ProjectName"
                      />
                    </div>
                  </div>
                  <div class="col-sm-6 col-md-3 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="projectLocation"
                        class="text-right col-form-label block"
                      >
                        {{ "projectLocation" | translate }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="projectLocation"
                        name="projectLocation"
                        formControlName="projectLocation"
                      />
                    </div>
                  </div>

                  <div class="col-sm-6 col-md-3 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="BriefNatureProject"
                        class="text-right col-form-label block"
                      >
                        {{ "BriefNatureProject" | translate }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="BriefNatureProject"
                        name="BriefNatureProject"
                        formControlName="BriefNatureProject"
                      />
                    </div>
                  </div>

                  <div class="col-sm-6 col-md-3 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="DurationContract"
                        class="text-right col-form-label block"
                      >
                        {{ "DurationContract" | translate }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="DurationContract"
                        name="DurationContract"
                        formControlName="DurationContract"
                      />
                    </div>
                  </div>

                  <p
                    *ngIf="modalDetails.type == 'supervisionContract'"
                    class="text-danger fw-bold text-decoration-underline"
                  >
                    {{ "mainContract" | translate }}
                  </p>
                  <div
                    *ngIf="modalDetails.type == 'supervisionContract'"
                    class="col-sm-6 mb-0 mb-sm-3"
                  >
                    <div class="form-group">
                      <label
                        for="ContractorName"
                        class="text-right col-form-label block"
                      >
                        {{ "Contractor's name" | translate }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="ContractorName"
                        name="ContractorName"
                        formControlName="ContractorName"
                      />
                    </div>
                  </div>

                  <div
                    *ngIf="modalDetails.type == 'supervisionContract'"
                    class="col-sm-6 mb-0 mb-sm-3"
                  >
                    <div class="form-group">
                      <label
                        for="ContractDate"
                        class="text-right col-form-label block"
                      >
                        {{ "ContractDate" | translate }}
                      </label>
                      <input
                        name="date"
                        ngModel
                        type="text"
                        class="form-control"
                        bsDatepicker
                        #dpr="bsDatepicker"
                        formControlName="ContractDate"
                      />
                    </div>
                  </div>

                  <div class="col-sm-6 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="maxCompensation"
                        class="text-right col-form-label block"
                      >
                        {{ "maxCompensation" | translate }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="maxCompensation"
                        name="maxCompensation"
                        formControlName="maxCompensation"
                      />
                    </div>
                  </div>

                  <div class="col-sm-6 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="periodCommitment"
                        class="text-right col-form-label block"
                      >
                        {{ "periodCommitment" | translate }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="periodCommitment"
                        name="periodCommitment"
                        formControlName="periodCommitment"
                      />
                    </div>
                  </div>

                  <div class="col-sm-6 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="consultantRepresent"
                        class="text-right col-form-label block"
                      >
                        {{ "consultantRepresent" | translate }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="consultantRepresent"
                        name="consultantRepresent"
                        formControlName="consultantRepresent"
                      />
                    </div>
                  </div>

                  <div class="col-sm-6 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="RepresentOwner"
                        class="text-right col-form-label block"
                      >
                        {{ "RepresentOwner" | translate }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="RepresentOwner"
                        name="RepresentOwner"
                        formControlName="RepresentOwner"
                      />
                    </div>
                  </div>

                  <div
                    *ngIf="offerPriceChecked"
                    class="col-sm-6 col-md-3 mb-0 mb-sm-3"
                  >
                    <div class="form-group">
                      <label class="col-form-label block">
                        {{ "Offer Price" | translate }}</label
                      >
                      <ng-select
                        class="w-full p-0"
                        placeholder="{{ 'Chose' | translate }}"
                        name="offerPrice"
                        formControlName="offerPrice"
                      >
                        <ng-option
                          *ngFor="let user of users"
                          [value]="user.id"
                          >{{ user.Name }}</ng-option
                        >
                      </ng-select>
                    </div>
                  </div>
                </div>
              </div>
              <div class="flex justify-between items-center flex-wrap">
                <button
                  mat-button
                  matStepperPrevious
                  class="btn btn-outline-secondary"
                >
                  {{ "Previous" | translate }}
                </button>
                <button mat-button matStepperNext class="bg-base text-white">
                  {{ "Next" | translate }}
                </button>
              </div>
            </form>
          </mat-step>
          <!-- 5 -->
          <mat-step>
            <ng-template matStepLabel>{{
              "ConditionsContract" | translate
            }}</ng-template>
            <div class="step-content">
              <div class="overflow-auto mt-4">
                <table
                  mat-table
                  [dataSource]="servicesDataSource"
                  matSort
                  class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max"
                >
                  <ng-container matColumnDef="M">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      <span>{{ "M" | translate }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.M }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="TeamWorkCategories">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      <span>{{ "TeamWorkCategories" | translate }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.TeamWorkCategories }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="Specialization">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      <span>{{ "Specialization" | translate }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.Specialization }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="Number">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      <span>{{ "Number" | translate }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.Number }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="Notes">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                      <span>{{ "Notes" | translate }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.Notes }}
                    </td>
                  </ng-container>

                  <tr
                    mat-header-row
                    *matHeaderRowDef="serviceDisplayedColumns"
                  ></tr>
                  <tr
                    mat-row
                    *matRowDef="let row; columns: serviceDisplayedColumns"
                  ></tr>
                </table>
              </div>
            </div>
            <div class="flex justify-between items-center flex-wrap">
              <button
                mat-button
                matStepperPrevious
                class="btn btn-outline-secondary"
              >
                {{ "Previous" | translate }}
              </button>
              <button mat-button matStepperNext class="bg-base text-white">
                {{ "Next" | translate }}
              </button>
            </div>
          </mat-step>

          <!-- 6 -->
          <mat-step>
            <ng-template matStepLabel
              >{{ "ConditionsContract" | translate }}
            </ng-template>
            <div class="step-content">
              <div class="row mb-3">
                <div class="row mb-3">
                  <h3 class="flex items-center justify-start fw-bold">
                    {{ "Add a new stage" | translate }}
                    <button
                      type="button "
                      class="add-btn mx-2"
                      (click)="addStage(stage?.length)"
                    >
                      <i class="fa fa-plus"></i>
                    </button>
                  </h3>
                  <div class="editable shadow mb-4">
                    <table
                      class="table table-responsive table-striped table-bordered text-center"
                      style="vertical-align: middle; font-size: 14px"
                    >
                      <thead
                        class="bg-base text-white"
                        style="line-height: 30px; font-size: 13px"
                      >
                        <tr>
                          <th>{{ "M" | translate }}</th>
                          <th>{{ "stage" | translate }}</th>
                          <th>{{ "description" | translate }}</th>
                          <th>{{ "BeginningPeriod" | translate }}</th>
                          <th>{{ "periodEnd" | translate }}</th>
                          <th>{{ "action" | translate }}</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr
                          *ngFor="let item of stage; let i = index"
                          style="line-height: 5px"
                        >
                          <td>{{ item.Massage }}</td>

                          <td>
                            <input
                              type="text"
                              name="stage{{ i }}"
                              [(ngModel)]="item.stage"
                              ngModel
                            />
                          </td>

                          <td>
                            <input
                              type="text"
                              name="description{{ i }}"
                              [(ngModel)]="item.description"
                              ngModel
                            />
                          </td>

                          <td>
                            <input
                              placeholder="{{ 'BeginningPeriod' | translate }}"
                              name="date"
                              ngModel
                              type="text"
                              class="form-control"
                              bsDatepicker
                              #dpr="bsDatepicker"
                            />
                          </td>

                          <td>
                            <input
                              placeholder="{{ 'periodEnd' | translate }}"
                              name="date"
                              ngModel
                              type="text"
                              class="form-control"
                              bsDatepicker
                              #dpr="bsDatepicker"
                            />
                          </td>

                          <td>
                            <button
                              class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                              (click)="deleteEmployee(i)"
                            >
                              <i class="fa-solid fa-trash-can"></i>
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div class="flex justify-between items-center flex-wrap">
              <button
                mat-button
                matStepperPrevious
                class="btn btn-outline-secondary"
              >
                {{ "Previous" | translate }}
              </button>
              <button mat-button matStepperNext class="bg-base text-white">
                {{ "Next" | translate }}
              </button>
            </div>
          </mat-step>
          <!-- 7 -->
          <mat-step [stepControl]="FormGroup07">
            <form [formGroup]="FormGroup07">
              <ng-template matStepLabel>{{
                "FeesPayment" | translate
              }}</ng-template>
              <div class="step-content">
                <div class="row align-items-end mb-4">
                  <div class="col-sm-6 col-md-4 mb-0 mb-sm-3">
                    <div class="form-group">
                      <label
                        for="totalFees"
                        class="text-right col-form-label block"
                      >
                        {{ "totalFees" | translate }}
                      </label>
                      <input
                        ngModel
                        class="form-control"
                        type="text"
                        id="totalFees"
                        name="totalFees"
                        formControlName="totalFees"
                      />
                    </div>
                  </div>

                  <div
                    *ngIf="offerPriceChecked"
                    class="col-sm-6 col-md-3 mb-0 mb-sm-3"
                  >
                    <div class="form-group">
                      <label class="col-form-label block">
                        {{ "Offer Price" | translate }}</label
                      >
                      <ng-select
                        class="w-full p-0"
                        placeholder="{{ 'Chose' | translate }}"
                        name="offerPrice"
                        formControlName="offerPrice"
                      >
                        <ng-option
                          *ngFor="let user of users"
                          [value]="user.id"
                          >{{ user.Name }}</ng-option
                        >
                      </ng-select>
                    </div>
                  </div>
                </div>
              </div>

              <div class="flex justify-between items-center flex-wrap">
                <button
                  mat-button
                  matStepperPrevious
                  class="btn btn-outline-secondary"
                >
                  {{ "Previous" | translate }}
                </button>
                <button mat-button class="bg-base text-white">
                  {{ "save" | translate }}
                </button>
              </div>
            </form>
          </mat-step>
        </mat-stepper>
      </div>

      <div class="flex gap-2 justify-end mt-3">
        <button
          type="button"
          (click)="modal.dismiss()"
          mat-raised-button
          color="primary"
        >
          {{ "close" | translate }}
        </button>
      </div>
    </div>
  </ng-template>
</div>
