<div class="general-journal">
  <app-navigator [title]="title"></app-navigator>
  <!-- inputs -->
  <div class="container-fluid">
    <form #form="ngForm" class="bg-blue-100 p-4 mt-3 rounded-lg">
      <div class="row align-items-center">
        <div class="col-xxl-3 col-md-4 col-sm-6 mb-3">
          <div class="form-group">
            <div class="form-group timeInput">
              <input
                placeholder="{{ 'Chose' | translate }}"
                [(ngModel)]="modalDetails.from"
                name="date"
                type="text"
                class="form-control"
                bsDatepicker
              />
            </div>
          </div>
        </div>
        <div class="col-xxl-3 col-md-4 col-sm-6 mb-3">
          <div class="form-group">
            <div class="form-group timeInput">
              <input
                placeholder="{{ 'Chose' | translate }}"
                [(ngModel)]="modalDetails.to"
                name="date"
                type="text"
                class="form-control"
                bsDatepicker
              />
            </div>
          </div>
        </div>
        <div class="col-xxl-3 col-md-4 col-sm-6 mb-3">
          <div class="form-group">
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'ChooseLevel' | translate }}"
              ngModel
              name="user"
            >
              <ng-option *ngFor="let user of users" [value]="user.id">{{
                user.Name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-xxl-3 col-md-4 col-sm-6 mb-3">
          <div class="form-group">
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              ngModel
              name="Chose"
            >
              <ng-option *ngFor="let user of users" [value]="user.id">{{
                user.Name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-xxl-3 col-md-4 col-sm-6 mb-3">
          <div class="form-group">
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              ngModel
              name="Chose"
            >
              <ng-option *ngFor="let user of users" [value]="user.id">{{
                user.Name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-xxl-3 col-md-4 col-sm-6 mb-3">
          <div class="form-group">
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              ngModel
              name="Chose"
            >
              <ng-option *ngFor="let user of users" [value]="user.id">{{
                user.Name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-xxl-3 col-md-4 col-sm-6 mb-3">
          <div class="form-group">
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              ngModel
              name="Chose"
            >
              <ng-option *ngFor="let user of users" [value]="user.id">{{
                user.Name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-xxl-3 col-md-4 col-sm-6 mb-3">
          <div class="form-group">
            <input
              placeholder="{{ 'search' | translate }}"
              type="text "
              class="w-full p-2 inputType"
              name="search"
            />
          </div>
        </div>

        <div class="col-xxl-3 col-md-4 col-sm-6 mb-3">
          <div class="form-check form-switch position-relative mb-2">
            <input
              class="form-check-input position-absolute end-25"
              type="checkbox"
              role="switch"
              [checked]="showTable"
              id="flexSwitchCheckDefault"
            />
            <label
              class="form-check-label me-5"
              for="flexSwitchCheckDefault"
              style="width: max-content"
            >
              {{ "monitor" | translate }}
              <i class="fa-solid fa-magnifying-glass"></i>
            </label>
          </div>
        </div>

        <div class="col-xxl-3 col-md-4 col-sm-6 mb-3">
          <div class="form-check form-switch position-relative mb-2">
            <input
              class="form-check-input position-absolute end-25"
              type="checkbox"
              role="switch"
              [checked]="showTable"
              id="flexSwitchCheckDefault3"
            />
            <label
              class="form-check-label me-5"
              for="flexSwitchCheckDefault3"
              style="width: max-content"
            >
              {{ "DoNotShowZeroAccounts" | translate }}
            </label>
          </div>
        </div>
      </div>
      <div class="head flex gap-2 flex-wrap items-end justify-between">
        <!-- all buttons  -->
        <div class="btns w-100">
          <div class="row d-md-flex justify-content-center">
            <button
              type="button"
              class="flex gap-1 btn btn-outline-secondary col-md-2"
            >
              {{ "search" | translate }}
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>

            <button
              type="button"
              class="flex gap-1 btn btn-outline-secondary border-0 col-md-2"
              (click)="form.reset()"
            >
              <i class="fa-solid fa-rotate-right"></i>
              {{ "Reset" | translate }}
            </button>
          </div>
        </div>
      </div>
    </form>

    <div>
      <h2 class="text-center mt-3">{{ "TrialBalance" | translate }}</h2>
      <div class="btns mb-3 w-100">
        <div class="row d-md-flex">
          <button
            type="button"
            class="flex gap-1 btn btn-outline-secondary mb-3 col-md-2"
          >
            {{ "TrialBalancePrinting" | translate }}
            <i class="fa-solid fa-print"></i>
          </button>

          <button
            type="button"
            class="flex gap-1 btn btn-success mb-3 col-md-2"
          >
            {{ "exportExcel" | translate }}
          </button>

          <button
            type="button"
            class="flex gap-1 btn bg-base text-white mb-3 col-md-2"
            (click)="open(DifferenceCreditorDebtorModal)"
          >
            {{ "DifferenceBetweenCreditorDebtor" | translate }}
          </button>
        </div>
      </div>

      <!-- table -->
      <div class="overflow-auto mt-4">
        <table class="w-100 bg-gray-100">
          <thead>
            <tr>
              <th class="px-4 py-2"></th>
              <th class="px-4 py-2 text-center text-base fw-bold" colspan="2">
                {{ "InitialBalance" | translate }}
              </th>
              <th class="px-4 py-2 text-center text-base fw-bold" colspan="2">
                {{ "theMovement" | translate }}
              </th>
              <th class="px-4 py-2 text-center text-base fw-bold" colspan="2">
                {{ "netTraffic" | translate }}
              </th>
              <th class="px-4 py-2 text-center text-base fw-bold" colspan="2">
                {{ "closingBalance" | translate }}
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="px-4 py-2 w-25 text-base text-center fw-bold">
                {{ "account" | translate }}
              </td>
              <td class="border px-4 py-2 text-center bg-green-100">
                {{ "debtor" | translate }}
              </td>
              <td class="border px-4 py-2 text-center bg-red-100">
                {{ "Creditor" | translate }}
              </td>
              <td class="border px-4 py-2 text-center bg-green-100">
                {{ "debtor" | translate }}
              </td>
              <td class="border px-4 py-2 text-center bg-red-100">
                {{ "Creditor" | translate }}
              </td>
              <td class="border px-4 py-2 text-center bg-green-100">
                {{ "debtor" | translate }}
              </td>
              <td class="border px-4 py-2 text-center bg-red-100">
                {{ "Creditor" | translate }}
              </td>
              <td class="border px-4 py-2 text-center bg-green-100">
                {{ "debtor" | translate }}
              </td>
              <td class="border px-4 py-2 text-center bg-red-100">
                {{ "Creditor" | translate }}
              </td>
            </tr>
            <tr *ngFor="let entry of TrialbBalanceEntries">
              <td class="border px-4 py-2 fw-bold">{{ entry.account }}</td>
              <td class="border px-4 py-2">{{ entry.debtorInitialBalance }}</td>
              <td class="border px-4 py-2">
                {{ entry.CreditorInitialBalance }}
              </td>
              <td class="border px-4 py-2">{{ entry.debtorTheMovement }}</td>
              <td class="border px-4 py-2">{{ entry.CreditorTheMovement }}</td>
              <td class="border px-4 py-2">{{ entry.debtorNetTraffic }}</td>
              <td class="border px-4 py-2">{{ entry.CreditorNetTraffic }}</td>
              <td class="border px-4 py-2">{{ entry.debtorClosingBalance }}</td>
              <td class="border px-4 py-2">
                {{ entry.creditorClosingBalance }}
              </td>
            </tr>
            <tr *ngIf="TrialbBalanceEntries.length != 0" class="bg-blue-100 text-center">
              <td class="border px-4 py-2">{{ "total" | translate }}</td>
              <td class="border px-4 py-2">13135</td>
              <td class="border px-4 py-2">13135</td>
              <td class="border px-4 py-2">13135</td>
              <td class="border px-4 py-2">13135</td>
              <td class="border px-4 py-2">13135</td>
              <td class="border px-4 py-2">13135</td>
              <td class="border px-4 py-2">13135</td>
              <td class="border px-4 py-2">13135</td>
            </tr>
            <tr *ngIf="TrialbBalanceEntries.length === 0">
              <td colspan="9" class="text-center p-2">No data available</td>
            </tr>
          </tbody>
        </table>
      </div>

      <mat-paginator [pageSizeOptions]="[10, 25]"> </mat-paginator>
    </div>
  </div>

  <!-- DifferenceCreditorDebtorModal -->
  <ng-template #DifferenceCreditorDebtorModal let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl">{{ "DebitCreditDetails" | translate }}</span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="max-h-100 overflow-x-scroll overflow-y-scroll p-4">
      <table class="border border-gray-500 w-100">
        <thead>
          <tr>
            <th class="px-4 py-2">{{ "Bond type" | translate }}</th>
            <th class="px-4 py-2">{{ "Bond number" | translate }}</th>

            <th class="px-4 py-2">{{ "Creditor" | translate }}</th>
            <th class="px-4 py-2">{{ "debtor" | translate }}</th>
            <th class="px-4 py-2">{{ "theDifference" | translate }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let entry of accountingEntries">
            <td class="border px-4 py-2">{{ entry.bondType }}</td>
            <td class="border px-4 py-2">{{ entry.bondNumber }}</td>
            <td class="border px-4 py-2">{{ entry.creditor }}</td>
            <td class="border px-4 py-2">{{ entry.debtor }}</td>
            <td class="border px-4 py-2">
              {{ entry.creditor - entry.debtor }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="flex justify-end p-3">
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "close" | translate }}
      </button>
    </div>
  </ng-template>
</div>
