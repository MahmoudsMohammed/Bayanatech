<div class="accounts-guide">
  <app-navigator [title]="title"></app-navigator>
  <div
    class="head flex gap-2 flex-wrap items-end justify-between justify-content-md-center"
  >
    <div class="row">
      <div class="col-md-5 col-8">
        <div class="tree">
          <tree-ngx
            [nodeItems]="nodeItems"
            class="{{ 'dir' | translate }}"
            (selectedItems)="selectedTask1 = $event"
            [options]="options"
          >
            <ng-template #nodeCollapsibleTemplate let-expanded="expanded">
              <span *ngIf="!expanded">
                <i class="fa-solid fa-folder-plus tree-icon"></i>
              </span>
              <span *ngIf="expanded">
                <i class="fa-solid fa-folder-minus tree-icon"></i>
              </span>
            </ng-template>
          </tree-ngx>
        </div>
      </div>
      <div class="col-md-7 col-8">
        <div class="row align-items-center bg-white mx-3">
          <h3 class="fw-bold m-3">{{ "AccountInformation" | translate }}</h3>
          <div class="col-xxl-6 col-lg-4 col-md-3 mb-0 mb-md-3">
            <div class="form-group">
              <label class="col-form-label">
                {{ "account code" | translate }}</label
              >
              <input
                type="text "
                class="w-full p-2 inputType"
                readonly
                name="accountCode"
                [(ngModel)]="acountCode2"
                placeholder="{{ 'account code' | translate }}"
              />
            </div>
          </div>

          <div class="col-lg-3 mb-0 mb-md-3">
            <div class="form-group">
              <label class="col-form-label"> {{ "debtor" | translate }}</label>
              <input
                type="text "
                readonly
                class="w-full p-2 inputType bg-green-400"
                name="debtor"
                placeholder="{{ 'debtor' | translate }}"
              />
            </div>
          </div>

          <div class="col-lg-3 mb-0 mb-md-3">
            <div class="form-group">
              <label class="col-form-label">
                {{ "Creditor" | translate }}</label
              >

              <input
                readonly
                type="text "
                class="w-full p-2 inputType bg-red-400"
                name="Creditor"
                placeholder="{{ 'Creditor' | translate }}"
              />
            </div>
          </div>
          <!-- 2 -->
          <div class="col-xxl-3 col-lg-4 col-md-5 mb-0 mb-md-3">
            <div class="form-group">
              <label class="col-form-label">
                {{ "MainAccountCode" | translate }}</label
              >

              <input
                type="text "
                readonly
                class="w-full p-2 inputType"
                name="MainAccountCode"
                placeholder="{{ 'MainAccountCode' | translate }}"
              />
            </div>
          </div>

          <div class="col-xxl-3 col-lg-4 col-md-5 mb-0 mb-md-3">
            <div class="form-group">
              <label class="col-form-label">
                {{ "MainAccountName" | translate }}</label
              >

              <input
                type="text "
                readonly
                class="w-full p-2 inputType"
                name="MainAccountName"
                placeholder="{{ 'MainAccountName' | translate }}"
              />
            </div>
          </div>

          <div class="col-xxl-3 col-lg-4 col-md-5 mb-0 mb-md-3">
            <div class="form-group">
              <label class="col-form-label">
                {{ "debtorEditorial" | translate }}</label
              >

              <input
                type="text "
                class="w-full p-2 inputType"
                name="debtorEditorial"
                placeholder="{{ 'debtor' | translate }}"
              />
            </div>
          </div>

          <div class="col-xxl-3 col-lg-4 col-md-5 mb-0 mb-md-3">
            <div class="form-group">
              <label class="col-form-label">
                {{ "CreditorEditorial" | translate }}</label
              >

              <input
                type="text "
                class="w-full p-2 inputType"
                name="CreditorEditorial"
                placeholder="{{ 'Creditor' | translate }}"
              />
            </div>
          </div>
          <!-- 3 -->
          <div class="col-xxl-6 col-lg-4 col-md-5 mb-0 mb-md-3">
            <div class="form-group">
              <label class="col-form-label">
                {{ "ArabicAccount" | translate }}</label
              >

              <input
                type="text "
                readonly
                class="w-full p-2 inputType"
                name="ArabicAccount"
                [(ngModel)]="accountNameAR"
                placeholder="{{ 'ArabicAccount' | translate }}"
              />
            </div>
          </div>

          <div class="col-xxl-6 col-lg-4 col-md-5 mb-0 mb-md-3">
            <div class="form-group">
              <label class="col-form-label">
                {{ "LatinAccount" | translate }}</label
              >

              <input
                type="text "
                readonly
                class="w-full p-2 inputType"
                name="LatinAccount"
                [(ngModel)]="accountNameAR"
                placeholder="{{ 'LatinAccount' | translate }}"
              />
            </div>
          </div>

          <!-- 4-->
          <div class="col-xxl-4 col-lg-5 col-md-5 mb-0 mb-md-3">
            <div class="form-group">
              <label class="col-form-label"> {{ "Type" | translate }}</label>
              <ng-select
                class="w-full p-0"
                placeholder="{{ 'Chose' | translate }}"
                ngModel
                disabled
                name="Type"
              >
                <ng-option *ngFor="let user of users" [value]="user.id">
                  {{ user.Name }}</ng-option
                >
              </ng-select>
            </div>
          </div>

          <div class="col-xxl-4 col-lg-5 col-md-5 mb-0 mb-md-3">
            <div class="form-group">
              <label class="col-form-label">
                {{ "Category" | translate }}</label
              >
              <ng-select
                class="w-full p-0"
                disabled
                placeholder="{{ 'Chose' | translate }}"
                ngModel
                name="Category"
              >
                <ng-option *ngFor="let user of users" [value]="user.id">{{
                  user.Name
                }}</ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-xxl-4 col-lg-5 col-md-5 mb-0 mb-md-3">
            <div class="form-group">
              <label class="col-form-label">
                {{ "accountLevel" | translate }}</label
              >

              <input
                type="text "
                readonly
                class="w-full p-2 inputType"
                name="accountLevel"
                placeholder="{{ 'accountLevel' | translate }}"
              />
            </div>
          </div>
          <!-- 5 -->

          <div class="col-xxl-4 col-lg-5 col-md-5 mb-0 mb-md-3">
            <div class="form-group">
              <label class="col-form-label">
                {{ "AccountDepreciationCompound" | translate }}</label
              >
              <ng-select
                disabled
                class="w-full p-0"
                placeholder="{{ 'Chose' | translate }}"
                ngModel
                name="AccountDepreciationCompound"
              >
                <ng-option *ngFor="let user of users" [value]="user.id">{{
                  user.Name
                }}</ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-xxl-4 col-lg-5 col-md-5 mb-0 mb-md-3">
            <div class="form-check form-switch position-relative my-4 flex-col">
              <label
                class="form-check-label mb"
                for="flexSwitchCheckDefault"
                style="width: max-content"
              >
                {{ "natureAccount" | translate }}
              </label>
              <br />
              <div
                class="form-types checkbox h-full flex-column position-absolute e-0"
              >
                <div class="checkbox-content relative {{ 'dir' | translate }}">
                  <!-- [checked]="item.status == 2" -->
                  <input
                    type="checkbox"
                    name="check"
                    [ngModel]="modalDetails.walk"
                    #checkbox="ngModel"
                    (change)="changeRequestStatus($event)"
                  />
                  <div class="box {{ modalDetails.walk ? 'checked' : 'blur' }}">
                    <span class="absolute">{{ "Creditor" | translate }}</span>
                    <span class="absolute">{{ "debtor" | translate }}</span>
                    <div class="cycle"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-xxl-4 col-lg-5 col-md-5 mb-0 mb-md-3">
            <div class="form-check form-switch position-relative my-4 flex-col">
              <label
                class="form-check-label mb"
                for="flexSwitchCheckDefault"
                style="width: max-content"
              >
                {{ "accounStatus" | translate }}
              </label>
              <br />
              <div
                class="form-types checkbox h-full flex-column position-absolute e-0"
              >
                <div class="checkbox-content relative {{ 'dir' | translate }}">
                  <!-- [checked]="item.status == 2" -->
                  <input
                    type="checkbox"
                    name="check"
                    [ngModel]="modalDetails.walk"
                    #checkbox="ngModel"
                    (change)="changeRequestStatus($event)"
                  />
                  <div class="box {{ modalDetails.walk ? 'checked' : 'blur' }}">
                    <span class="absolute">{{ "Inactive" | translate }}</span>
                    <span class="absolute">{{ "active" | translate }}</span>
                    <div class="cycle"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- all buttons  -->
        <div class="btns mb-3 w-100">
          <div class="row d-md-flex justify-content-end">
            <button
              type="button"
              class="flex gap-1 btn bg-base text-white mb-3 col-md-2"
            >
              {{ "new" | translate }}
            </button>

            <button type="button" class="btn bg-base text-white mb-3 col-md-2">
              {{ "save" | translate }}
            </button>

            <button
              type="button"
              class="flex gap-1 btn bg-base text-white mb-3 col-md-2"
              (click)="sendToPrint()"
            >
              {{ "Print" | translate }}
              <i class="fa-solid fa-print"></i>
            </button>

            <button
              type="button"
              class="flex gap-1 btn btn-outline-secondary mb-3 col-md-2"
            >
              {{ "exportExcel" | translate }}
            </button>

            <button
              type="button"
              class="flex gap-1 btn btn-secondary mb-3 col-md-2 ms-3"
            >
              {{ "close" | translate }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- table -->
  <div class="overflow-auto mt-4">
    <table
      *ngIf="showTable"
      mat-table
      [dataSource]="projectsDataSource"
      matSort
      class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max"
    >
      <ng-container matColumnDef="accountCode">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <span>{{ "account code" | translate }}</span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.accountCode }}
        </td>
      </ng-container>

      <ng-container matColumnDef="accountNameAR">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <span>{{ "accountNameAR" | translate }}</span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.accountNameAR }}
        </td>
      </ng-container>

      <ng-container matColumnDef="accountNameLat">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <span>{{ "accountNameLat" | translate }}</span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.accountNameLat }}
        </td>
      </ng-container>

      <ng-container matColumnDef="accountLevel">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <span>{{ "accountLevel" | translate }}</span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.accountLevel }}
        </td>
      </ng-container>

      <ng-container matColumnDef="AccountClas">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <span>{{ "AccountClas" | translate }}</span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.AccountClas }}
        </td>
      </ng-container>

      <ng-container matColumnDef="accountType">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <span>{{ "accountType" | translate }}</span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.accountType }}
        </td>
      </ng-container>

      <ng-container matColumnDef="MainAccount">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <span>{{ "MainAccount" | translate }}</span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.MainAccount }}
        </td>
      </ng-container>

      <ng-container matColumnDef="operations">
        <th
          mat-header-cell
          *matHeaderCellDef
          [translate]="'name'"
          [translateParams]="{
            ar: 'خيارات',
            en: 'Operations'
          }"
        ></th>
        <td mat-cell *matCellDef="let element">
          <div class="flex gap-1 justify-center py-2">
            <button
              type="button"
              id="68"
              class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
              data-toggle="tooltip"
              data-placement="top"
              (click)="onAccountCodeClick(element)"
            >
              <i class="fa-regular fa-pen-to-square"></i>
            </button>

            <button
              type="button"
              id="68"
              class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10 me-3"
              data-toggle="tooltip"
              data-placement="top"
              (click)="open(deleteModal, null, 'delete')"
            >
              <i class="fa-solid fa-trash-can"></i>
            </button>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="projectDisplayedColumns"></tr>

      <tr mat-row *matRowDef="let row; columns: projectDisplayedColumns"></tr>
    </table>

    <div *ngIf="!showTable" class="text-center">No Data Available in Table</div>
  </div>

  <mat-paginator *ngIf="showTable" [pageSizeOptions]="[10, 25]">
  </mat-paginator>
</div>

<!-- deleteModal -->
<ng-template #deleteModal let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد حذف هذا العنصر ؟',
        en: 'Do you want to delete this item?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "close" | translate }}
      </button>

      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="confirm(); modal.dismiss()"
      >
        {{ "confirem" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- <div id="print-voucher" style="opacity: 0; position: fixed">awdawd</div> -->
