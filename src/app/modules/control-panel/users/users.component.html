<div class="add-search pb-4">
  <app-navigator [title]="title"></app-navigator>

  <div class="mt-3">
    <div class="flex gap-2">
      <div class="w-10 btn btn-primary text-center leading-5">
        <i class="fa-solid fa-key"></i>
      </div>
      <span
        class="text-xl text-blue-600 font-bold"
        [translate]="'name'"
        [translateParams]="{
          ar: ' مرخص لــ/ النسخة التجريبية - DEMO',
          en: 'Employee Name'
        }"
      >
      </span>
    </div>
    <!-- buttons -->
    <div class="flex justify-between gap-2 items-center my-3 flex-wrap">
      <div class="w-fit">
        <input
          class="form-control"
          (keyup)="applyFilter($event)"
          placeholder="{{ 'search' | translate }}"
          #input
        />
      </div>
      <div class="flex gap-2 controler">
        <button
          class="flex gap-1 btn btn-primary"
          (click)="open(userStatus, '', 'xl', 'top')"
        >
          <span
            class="hidden md:block"
            [translate]="'name'"
            [translateParams]="{
              ar: ' حالة المستخدم   ',
              en: 'User Status'
            }"
          >
          </span>
          <i class="fa-solid fa-user"></i>
        </button>
        <button
          (click)="open(dataModal, '', 'xl')"
          class="flex gap-1 btn btn-primary"
        >
          <span
            class="hidden md:block"
            [translate]="'name'"
            [translateParams]="{
              ar: '  مستخدم جديد   ',
              en: 'New User'
            }"
          >
          </span>
          <i class="fa-solid fa-plus"></i>
        </button>
        <button
          (click)="open(online, '', 'lg')"
          class="flex gap-1 btn btn-primary"
        >
          <span
            class="hidden md:block"
            [translate]="'name'"
            [translateParams]="{
              ar: '  المتصلون الآن  ',
              en: 'Online'
            }"
          >
          </span>
          <i class="fa-solid fa-user"></i>
        </button>
        <button
          (click)="open(userPermisions, '', 'lg')"
          class="flex gap-1 btn btn-primary"
        >
          <span
            class="hidden md:block"
            [translate]="'name'"
            [translateParams]="{
              ar: '  استعلام عن مستخدم  ',
              en: 'User Query'
            }"
          >
          </span>
          <i class="fa-solid fa-search"></i>
        </button>
        <button
          (click)="open(permissions, '', 'lg')"
          class="flex gap-1 btn btn-primary"
        >
          <span
            class="hidden md:block"
            [translate]="'name'"
            [translateParams]="{
              ar: ' استعلام عن صلاحية  ',
              en: 'User Permissions'
            }"
          >
          </span>
          <i class="fa-solid fa-search"></i>
        </button>
      </div>
    </div>

    <!-- table -->
    <div class="overflow-auto mt-3 data-table">
      <table
        class="min-w-max overflow-hidden rounded-t-lg table table-bordered"
        style="vertical-align: middle"
      >
        <thead>
          <tr class="bg-base text-white">
            <th
              class="invoice-title uppercase text-center"
              [translate]="'name'"
              [translateParams]="{
                ar: 'رقم العقد	',
                en: 'Contract Number'
              }"
            ></th>
            <th
              class="invoice-title uppercase text-center"
              [translate]="'name'"
              [translateParams]="{
                ar: 'عدد المستخدمين	',
                en: 'User Count'
              }"
            ></th>
            <!-- <th
              class="invoice-title uppercase text-center"
              [translate]="'name'"
              [translateParams]="{
                ar: 'عدد المستنفذ	',
                en: 'Depleted User Count'
              }"
            ></th>
            <th
              class="invoice-title uppercase text-center"
              [translate]="'name'"
              [translateParams]="{
                ar: 'عدد المتبقي	',
                en: 'Remaining User Count'
              }"
            ></th>
            <th
              class="invoice-title uppercase text-center"
              [translate]="'name'"
              [translateParams]="{
                ar: ' غير المرخص	',
                en: 'Unlicensed User Count'
              }"
            ></th> -->
            <th
              class="invoice-title uppercase text-center"
              [translate]="'name'"
              [translateParams]="{
                ar: 'الفئة	',
                en: 'Category'
              }"
            ></th>
            <th
              class="invoice-title uppercase text-center"
              [translate]="'name'"
              [translateParams]="{
                ar: 'انتهاءاتفاقيةالدعم الفنى	',
                en: 'Day'
              }"
            ></th>
            <th
              class="invoice-title uppercase text-center"
              [translate]="'name'"
              [translateParams]="{
                ar: 'بريد المسئول	',
                en: 'Email'
              }"
            ></th>
            <th
              class="invoice-title uppercase text-center"
              [translate]="'name'"
              [translateParams]="{
                ar: 'جوال		',
                en: 'Mobile'
              }"
            ></th>
            <th
              class="invoice-title uppercase text-center"
              [translate]="'name'"
              [translateParams]="{
                ar: 'تاريخ إنتهاء الإستضافة		',
                en: 'End Date'
              }"
            ></th>
            <th
              class="invoice-title uppercase text-center"
              [translate]="'name'"
              [translateParams]="{
                ar: 'إعدادات	',
                en: 'Setting'
              }"
            ></th>
          </tr>
        </thead>
        <tbody id="tabledetails">
          <tr class="text-black text-center">
            <td>123123</td>
            <td>sdfsdf</td>
            <!-- <td>sdfsef</td>
            <td>2323</td>
            <td>2323</td> -->
            <td>
              <input
                type="text"
                name="Category"
                class="form-control"
                [ngModel]="'A'"
                style="max-width: 140px; text-align: center"
                readonly
              />
            </td>
            <td>2323</td>
            <td>sef</td>
            <td>23</td>
            <td>32</td>
            <td>32</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- notes -->
    <div class="row">
      <div class="col-lg-5">
        <div class="stats row items-center gap-8 flex-wrap">
          <div class="box text-center bg-red-100 col-md-6 col-xl-3">
            <img
              src="/assets/images/user.jpg"
              class="d-block m-auto img-fluid"
            />
            <div>
              <span style="margin-inline-end: 5px">{{
                "Exhausted number" | translate
              }}</span>
              <span>20</span>
            </div>
          </div>
          <div class="box text-center bg-green-100 col-md-6 col-xl-3">
            <img
              src="/assets/images/user.jpg"
              class="d-block m-auto img-fluid"
            />
            <div>
              <span style="margin-inline-end: 5px">{{
                "remaining number" | translate
              }}</span>
              <span>20</span>
            </div>
          </div>
          <div class="box text-center bg-yellow-100 col-md-6 col-xl-3">
            <img
              src="/assets/images/not.png"
              class="d-block m-auto img-fluid"
            />
            <div>
              <span style="margin-inline-end: 5px">{{
                "Unlicensed" | translate
              }}</span>
              <span>20</span>
            </div>
          </div>
          <div class="box text-center bg-purple-100 col-md-6 col-xl-3">
            <img
              src="/assets/images/checkhand.png"
              class="d-block m-auto img-fluid"
            />
            <span style="margin-inline-end: 5px">{{
              "Support contract expired" | translate
            }}</span>
          </div>
        </div>
      </div>
      <div class="col-lg-7">
        <div class="overflow-auto mt-3">
          <table
            class="min-w-max overflow-hidden rounded-t-lg table table-bordered"
          >
            <thead>
              <tr class="bg-base text-white">
                <th
                  class="invoice-title uppercase text-center"
                  [translate]="'name'"
                  [translateParams]="{
                    ar: 'بعض ملاحظات الدعم	',
                    en: 'Support Notes'
                  }"
                ></th>
              </tr>
            </thead>
            <tbody id="tabledetails">
              <tr class="text-black text-center">
                <td>nawd awd awdnwakd</td>
              </tr>
              <tr class="text-black text-center">
                <td>nawd awd awdnwakd</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- users -->
    <div class="overflow-auto mt-3">
      <table
        mat-table
        [dataSource]="data.users"
        matSort
        class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max"
      >
        <ng-container matColumnDef="UserId">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'م',
                en: '#'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.UserId }}
          </td>
        </ng-container>
        <ng-container matColumnDef="UserName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'المستخدم',
                en: 'User'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            <div class="w-20 p-3">
              <img
                class="aspect-square rounded-full object-cover"
                src="assets/user-test.jpeg"
                alt=""
              />
            </div>
          </td>
        </ng-container>
        <ng-container matColumnDef="FullName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'اسم الموظف',
                en: 'Employee'
              }"
            ></span>
          </th>
          <td class="max-w-xs" mat-cell *matCellDef="let element">
            {{ element.FullName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="JobName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'الوظيفة',
                en: 'Job'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.JobName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="DepartmentName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'القسم',
                en: 'Department'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.DepartmentName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="GroupName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'المجموعة',
                en: 'Group'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.GroupName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="BranchName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'الفرع',
                en: 'Branch'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.BranchName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="Status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'الحالة',
                en: 'Status'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.Status ? "نشط" : "غير نشط" }}
          </td>
        </ng-container>
        <ng-container matColumnDef="LastLoginDate">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'آخر دخول',
                en: 'Last login'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.LastLoginDate }}
          </td>
        </ng-container>
        <ng-container matColumnDef="appStatus">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'حالة التطبيق',
                en: 'App Status'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            <span
              class="{{
                element.Status ? 'text-green-500' : 'text-red-500'
              }} fw-bold"
              >{{ element.Status ? "مفعل" : "غير مفعل" }}</span
            >
          </td>
        </ng-container>
        <ng-container matColumnDef="DeviceId">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'معرف الجهاز',
                en: 'Device ID'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.DeviceId }}
          </td>
        </ng-container>
        <ng-container matColumnDef="DeviceType">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'نظام التشغيل',
                en: 'OS'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">اندرويد</td>
        </ng-container>
        <ng-container matColumnDef="operations">
          <th
            mat-header-cell
            *matHeaderCellDef
            [translate]="'name'"
            [translateParams]="{
              ar: 'خيارات',
              en: 'Operations'
            }"
          ></th>
          <td mat-cell *matCellDef="let element">
            <div class="flex gap-1 justify-center py-2">
              <button
                (click)="open(dataModal, '', 'xl')"
                class="min-w-max p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <!--  -->
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                (click)="open(deleteModal, '', 'md')"
                class="min-w-max p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
          class="duration-300 hover:bg-slate-100"
        ></tr>
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "No result found for " }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>
    <mat-paginator [pageSizeOptions]="[10, 25]"> </mat-paginator>
  </div>
</div>

<ng-template #dataModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">
        {{ "Edit User Details" | translate }}
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body cpanel-users users">
    <form class="modal-form" #form="ngForm">
      <mat-tab-group>
        <!-- personal data -->
        <mat-tab [dir]="'dir' | translate">
          <ng-template mat-tab-label>
            <span>
              {{ "Personal data" | translate }}
            </span>
          </ng-template>
          <div class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3">
            <div>
              <label class="col-form-label"
                >{{ "nameAr" | translate }}
                <span class="text-danger">*</span></label
              >
              <input
                type="text"
                id="empNameArtxt"
                name="empNameArtxt"
                class="form-control"
                placeholder="{{ 'nameAr' | translate }}"
              />
            </div>
            <div>
              <label class="col-form-label" for="empNameEntxt">{{
                "nameEn" | translate
              }}</label>
              <input
                type="text"
                id="empNameEntxt"
                name="empNameEntxt"
                class="form-control"
                placeholder="{{ 'nameEn' | translate }} "
              />
            </div>
            <div>
              <label class="col-form-label">{{ "username" | translate }}</label>
              <input
                type="text"
                class="form-control"
                placeholder="{{ 'username' | translate }} "
              />
            </div>
            <div>
              <label class="col-form-label">{{ "Email" | translate }}</label>
              <input
                type="email"
                class="form-control"
                placeholder="{{ 'Email' | translate }} "
              />
            </div>
            <div>
              <label class="col-form-label">{{
                "Confirm Email" | translate
              }}</label>
              <input
                type="email"
                class="form-control"
                placeholder="{{ 'Confirm Email' | translate }} "
              />
            </div>
            <div>
              <label class="col-form-label">{{ "Mobile" | translate }}</label>
              <input
                type="tel"
                class="form-control"
                placeholder="{{ 'Mobile' | translate }} "
              />
            </div>

            <div class="flex gap-2 items-end">
              <div class="flex-grow">
                <label class="col-form-label">
                  {{ "Group" | translate }}<span class="text-danger">*</span>
                </label>
                <ng-select
                  class="w-full p-0"
                  placeholder="{{ 'Group' | translate }}"
                >
                  <ng-option>اختيار</ng-option>
                  <ng-option>اختيار</ng-option>
                  <ng-option>اختيار</ng-option>
                </ng-select>
              </div>
              <button
                (click)="open(addNewGroup, '', 'lg')"
                class="btn bg-base text-white mt-3"
                type="type"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>

            <div>
              <label class="col-form-label">
                {{ "Branch" | translate }}
                <span class="text-danger">*</span></label
              >
              <ng-select
                class="w-full p-0"
                placeholder="{{ 'Branch' | translate }}"
              >
                <ng-option>اختيار</ng-option>
                <ng-option>اختيار</ng-option>
                <ng-option>اختيار</ng-option>
              </ng-select>
            </div>

            <div class="flex gap-2 items-end">
              <div class="flex-grow">
                <label class="col-form-label">
                  {{ "Department" | translate
                  }}<span class="text-danger">*</span>
                </label>
                <ng-select
                  class="w-full p-0"
                  placeholder="{{ 'Department' | translate }}"
                >
                  <ng-option>اختيار</ng-option>
                  <ng-option>اختيار</ng-option>
                  <ng-option>اختيار</ng-option>
                </ng-select>
              </div>
              <button
                (click)="open(departments, '', 'lg')"
                class="btn bg-base text-white mt-3"
                type="type"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>

            <div class="flex gap-2 items-end">
              <div class="flex-grow">
                <label class="col-form-label">
                  {{ "Job" | translate }}
                  <span class="text-danger">*</span></label
                >
                <ng-select
                  class="w-full p-0"
                  placeholder="{{ 'Job' | translate }}"
                >
                  <ng-option>اختيار</ng-option>
                  <ng-option>اختيار</ng-option>
                  <ng-option>اختيار</ng-option>
                </ng-select>
              </div>
              <button
                (click)="open(jobs, '', 'lg')"
                class="btn bg-base text-white mt-3"
                type="type"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>

            <div>
              <label class="col-form-label"
                >{{ "Specific for Engineer" | translate }}
                <span class="text-danger">*</span></label
              >
              <input
                type="text"
                class="form-control"
                placeholder="{{ 'fullNameAr' | translate }}"
              />
            </div>

            <div>
              <label class="col-form-label"
                >{{ "ID Number" | translate }}
                <span class="text-danger">*</span></label
              >
              <input
                type="text"
                class="form-control"
                placeholder="{{ 'ID Number' | translate }}"
              />
            </div>
            <div>
              <label class="col-form-label"
                >{{ "Cirtificate Number" | translate }}
                <span class="text-danger">*</span></label
              >
              <input
                type="text"
                class="form-control"
                placeholder="{{ 'Cirtificate Number' | translate }}"
              />
            </div>

            <div>
              <label class="col-form-label">
                {{ "Work" | translate }}
                <span class="text-danger">*</span></label
              >
              <ng-select
                class="w-full p-0"
                placeholder="{{ 'Work' | translate }}"
              >
                <ng-option>اختيار</ng-option>
                <ng-option>اختيار</ng-option>
                <ng-option>اختيار</ng-option>
              </ng-select>
            </div>

            <div>
              <label class="col-form-label">
                {{ "User branches" | translate }}
                <span class="text-danger">*</span></label
              >
              <tree-ngx [nodeItems]="treeItems" [options]="options"> </tree-ngx>

              <!-- <ng-select
                [items]="users"
                [multiple]="true"
                bindLabel="Name"
                groupBy="type"
                [selectableGroup]="true"
                [selectableGroupAsModel]="false"
                [closeOnSelect]="false"
                bindValue="id"
                ngModel
              >
                <ng-template
                  ng-optgroup-tmp
                  let-item="item"
                  let-item$="item$"
                  let-index="index"
                >
                  <input
                    id="item-{{ index }}"
                    type="checkbox"
                    [ngModel]="item$.selected"
                  />
                  Select All
                </ng-template>

                <ng-template
                  ng-option-tmp
                  let-item="item"
                  let-item$="item$"
                  let-index="index"
                >
                  <input
                    id="item-{{ index }}"
                    type="checkbox"
                    [ngModel]="item$.selected"
                  />
                  {{ item.Name }}
                </ng-template>
              </ng-select> -->
            </div>

            <div>
              <label class="col-form-label">{{ "Notes" | translate }} </label>
              <textarea class="form-control" rows="1"></textarea>
            </div>
          </div>

          <div class="flex gap-2 items-end mt-3">
            <mat-slide-toggle color="primary"
              ><span
                [translate]="'name'"
                [translateParams]="{
                  ar: 'الحساب نشط',
                  en: 'Active Account'
                }"
              ></span
            ></mat-slide-toggle>
            <mat-slide-toggle color="primary"
              ><span
                [translate]="'name'"
                [translateParams]="{
                  ar: 'اغلاق الحساب',
                  en: 'Close Account'
                }"
              ></span
            ></mat-slide-toggle>
            <!--
            <div class="form-group timeInput">
              <label class="col-form-label ">{{ "Reactive Account Date" | translate }}
                <span class="text-danger">*</span></label>
              <input placeholder="{{ 'Chose Date' | translate }} " type="text" class="form-control" bsDatepicker
                #dpr="bsDatepicker" />
            </div> -->
            <div class="form-group">
              <label class="col-form-label"
                >{{ "Reactive Account Date" | translate }}
                <span class="text-danger">*</span></label
              >
              <input
                placeholder="{{ 'Chose Date' | translate }} "
                type="datetime-local"
                class="form-control"
              />
            </div>
          </div>
        </mat-tab>

        <mat-tab>
          <ng-template mat-tab-label>
            <span>
              {{ "User Permissions" | translate }}
            </span>
          </ng-template>
          <tree-ngx
            [nodeItems]="nodeItems"
            class="{{ 'dir' | translate }}"
            (selectedItems)="selectedTask1 = $event"
            [options]="options"
          >
            <ng-template #nodeCollapsibleTemplate let-expanded="expanded">
              <span *ngIf="!expanded">
                <i class="fa-solid fa-folder-plus tree-icon"></i>
              </span>
              <span *ngIf="expanded">
                <i class="fa-solid fa-folder-minus tree-icon"></i>
              </span>
            </ng-template>
          </tree-ngx>
        </mat-tab>
        <mat-tab>
          <ng-template mat-tab-label>
            <span>
              {{ "Notifications Permissions" | translate }}
            </span>
          </ng-template>
          <div class="overflow-auto px-10">
            <tree-ngx
              [nodeItems]="nodeItems"
              class="{{ 'dir' | translate }}"
              (selectedItems)="selectedTask1 = $event"
              [options]="options"
            >
              <ng-template #nodeCollapsibleTemplate let-expanded="expanded">
                <span *ngIf="!expanded">
                  <i class="fa-solid fa-folder-plus tree-icon"></i>
                </span>
                <span *ngIf="expanded">
                  <i class="fa-solid fa-folder-minus tree-icon"></i>
                </span>
              </ng-template>
            </tree-ngx>
          </div>
        </mat-tab>
      </mat-tab-group>
    </form>
    <div
      class="flex gap-2 justify-between items-end flex-wrap pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
    >
      <div class="flex gap-2 items-center">
        <img
          class="w-20 aspect-square rounded-full object-cover"
          [src]="
            'https://tameercloud.com/Uploads/Users/shegaley last pecture 13-12-2022.jpg'
          "
          alt=""
        />
        <div class="flex flex-col gap-2">
          <span>{{ "Data Entry" | translate }}</span>
          <div class="flex flex-col">
            <span>awdawdawd</span>
            <span>{{ date | date : "short" }}</span>
          </div>
        </div>
      </div>

      <button class="btn bg-base text-white" type="submit">
        {{ "Save" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- confirm delete Modal -->
<ng-template #deleteModal let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="modal.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- addNewGroup   -->
<ng-template #addNewGroup let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="modal-title mb-0" id="modal-basic-title">
      <span
        class="text-2xl"
        [translate]="'name'"
        [translateParams]="{
          ar: 'إضافة مجموعة جديدة',
          en: 'Add new group'
        }"
      >
      </span>
    </h4>
    <button
      type="button"
      class="text-white m-0"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    >
      <i class="fa fa-close"></i>
    </button>
  </div>

  <div class="modal-body">
    <form class="modal-form" #form="ngForm">
      <div class="grid md:grid-cols-2 gap-3">
        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "nameAr" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            class="form-control"
            type="text"
            [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
          />
        </div>
        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "nameEn" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            class="form-control"
            type="text"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
        </div>
      </div>
    </form>
    <div
      class="flex gap-2 justify-end pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
    >
      <button class="btn bg-base text-white" type="submit">
        {{ "Save" | translate }}
      </button>
      <button (click)="modal.dismiss()" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- addNewjobs  -->
<ng-template #jobs let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">
        {{ "Jobs" | translate }}
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <form class="modal-form" #form="ngForm">
      <div class="grid md:grid-cols-2 gap-3">
        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "nameAr" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            class="form-control"
            type="text"
            [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
          />
        </div>
        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "nameEn" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            class="form-control"
            type="text"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
        </div>
      </div>

      <div class="max-h-80 overflow-auto mt-2 col-span-1 md:col-span-2">
        <table class="custome-table">
          <thead>
            <tr class="text-center">
              <th>{{ "nameAr" | translate }}</th>
              <th>{{ "nameEn" | translate }}</th>
              <th
                [translate]="'name'"
                [translateParams]="{
                  ar: 'خيارات',
                  en: 'Operations'
                }"
              ></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>الاسم العربي</td>
              <td>Name English test</td>
              <td class="flex gap-2 justify-center">
                <button
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
                <button
                  class="min-w-max p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
    <div
      class="flex gap-2 justify-end pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
    >
      <button class="btn bg-base text-white" type="submit">
        {{ "Save" | translate }}
      </button>
      <button (click)="modal.dismiss()" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- addNewdepartments   -->
<ng-template #departments let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">
        {{ "Departments" | translate }}
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <form class="modal-form" #form="ngForm">
      <div class="grid md:grid-cols-2 gap-3">
        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "nameAr" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            class="form-control"
            type="text"
            [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
          />
        </div>
        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "nameEn" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            class="form-control"
            type="text"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
        </div>
      </div>

      <div class="max-h-80 overflow-auto mt-2 col-span-1 md:col-span-2">
        <table class="custome-table">
          <thead>
            <tr class="text-center">
              <th>{{ "nameAr" | translate }}</th>
              <th>{{ "nameEn" | translate }}</th>
              <th
                [translate]="'name'"
                [translateParams]="{
                  ar: 'خيارات',
                  en: 'Operations'
                }"
              ></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>الاسم العربي</td>
              <td>Name English test</td>
              <td class="flex gap-2 justify-center">
                <button
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
                <button
                  class="min-w-max p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
    <div
      class="flex gap-2 justify-end pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
    >
      <button class="btn bg-base text-white" type="submit">
        {{ "Save" | translate }}
      </button>
      <button (click)="modal.dismiss()" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- Online   -->
<ng-template #online let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span
        class="text-2xl"
        [translate]="'name'"
        [translateParams]="{
          ar: '  المتصلون الآن  ',
          en: 'Online'
        }"
      >
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <div class="overflow-auto mt-3">
      <table
        mat-table
        [dataSource]="modals.rows.online"
        #onlinedata
        matSort
        class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max"
      >
        <ng-container matColumnDef="UserName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'المستخدم',
                en: 'User'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            <div class="w-20 p-3">
              <img
                class="aspect-square rounded-full object-cover"
                src="assets/user-test.jpeg"
                alt=""
              />
            </div>
          </td>
        </ng-container>
        <ng-container matColumnDef="JobName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'الوظيفة',
                en: 'Job'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.JobName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="DepartmentName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'القسم',
                en: 'Department'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.DepartmentName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="LastLoginDate">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'آخر دخول',
                en: 'Last login'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.LastLoginDate }}
          </td>
        </ng-container>
        <ng-container matColumnDef="GroupName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'المجموعة',
                en: 'Group'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.GroupName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="BranchName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'الفرع',
                en: 'Branch'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.BranchName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="operations">
          <th
            mat-header-cell
            *matHeaderCellDef
            [translate]="'name'"
            [translateParams]="{
              ar: 'خيارات',
              en: 'Operations'
            }"
          ></th>
          <td mat-cell *matCellDef="let element">
            <div class="flex gap-1 justify-center py-2">
              <button
                class="min-w-max p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <!--  -->
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                class="min-w-max p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="modals.columns.online"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: modals.columns.online"
          class="duration-300 hover:bg-slate-100"
        ></tr>
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "No result found for " }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>
    <mat-paginator #onlinedatapaginator [pageSizeOptions]="[10, 25]">
    </mat-paginator>
  </div>
</ng-template>

<!-- user permisions   -->
<ng-template #userPermisions let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span
        class="text-2xl"
        [translate]="'name'"
        [translateParams]="{
          ar: 'صلاحيات المستخدم',
          en: 'User Permissions'
        }"
      >
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <!-- buttons -->
    <div class="flex justify-between gap-2 items-center flex-wrap">
      <div>
        <label class="col-form-label"> {{ "User" | translate }}</label>
        <ng-select class="w-full p-0" placeholder="{{ 'Chose' | translate }}">
          <ng-option> اختيار</ng-option>
        </ng-select>
      </div>

      <div class="w-fit">
        <label class="col-form-label"> {{ "Search" | translate }}</label>
        <input
          class="form-control"
          (keyup)="applyFilter($event)"
          placeholder="{{ 'search' | translate }} . . ."
          #input
        />
      </div>
    </div>
    <div class="overflow-auto mt-3">
      <table
        mat-table
        [dataSource]="modals.rows.usersPermissions"
        matSort
        #userPermissionstable
        class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max"
      >
        <ng-container matColumnDef="PriviLedgeName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'الصلاحية',
                en: 'Permission'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.PriviLedgeName }}
          </td>
        </ng-container>

        <ng-container matColumnDef="Status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'تسجيل',
                en: 'login'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            <i
              class="fa-solid {{ element.Status ? 'fa-check' : 'fa-xmark' }}"
            ></i>
          </td>
        </ng-container>
        <ng-container matColumnDef="Insert">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'ادخال',
                en: 'ُEnter'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            <i
              class="fa-solid {{ element.Insert ? 'fa-check' : 'fa-xmark' }}"
            ></i>
          </td>
        </ng-container>
        <ng-container matColumnDef="Update">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'تعديل',
                en: 'Edit'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            <i
              class="fa-solid {{ element.Update ? 'fa-check' : 'fa-xmark' }}"
            ></i>
          </td>
        </ng-container>
        <ng-container matColumnDef="Delete">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'حذف',
                en: 'Delete'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            <i
              class="fa-solid {{ element.Delete ? 'fa-check' : 'fa-xmark' }}"
            ></i>
          </td>
        </ng-container>

        <tr
          mat-header-row
          *matHeaderRowDef="modals.columns.usersPermissions"
        ></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: modals.columns.usersPermissions"
          class="duration-300 hover:bg-slate-100"
        ></tr>
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "No result found for " }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>
    <mat-paginator #userPermissionspag [pageSizeOptions]="[10, 25]">
    </mat-paginator>
  </div>
</ng-template>
<!--   permisions   -->
<ng-template #permissions let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span
        class="text-2xl"
        [translate]="'name'"
        [translateParams]="{
          ar: 'صلاحيات المستخدم',
          en: 'User Permissions'
        }"
      >
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <!-- buttons -->
    <div class="flex justify-between gap-2 items-center flex-wrap">
      <div>
        <label
          class="col-form-label"
          [translate]="'name'"
          [translateParams]="{
            ar: 'الصلاحية',
            en: '  Permissions'
          }"
        >
        </label>
        <ng-select class="w-full p-0" placeholder="{{ 'Chose' | translate }}">
          <ng-option> اختيار</ng-option>
        </ng-select>
      </div>

      <div class="w-fit">
        <label class="col-form-label"> {{ "Search" | translate }}</label>
        <input
          class="form-control"
          (keyup)="applyFilter($event)"
          placeholder="{{ 'search' | translate }} . . ."
          #input
        />
      </div>
    </div>
    <div class="overflow-auto mt-3">
      <table
        mat-table
        [dataSource]="modals.rows.permissions"
        matSort
        #Permissionstable
        class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max"
      >
        <ng-container matColumnDef="FullName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span> {{ "User" | translate }}</span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.FullName }}
          </td>
        </ng-container>

        <ng-container matColumnDef="Status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'تسجيل',
                en: 'login'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            <i
              class="fa-solid {{ element.Status ? 'fa-check' : 'fa-xmark' }}"
            ></i>
          </td>
        </ng-container>
        <ng-container matColumnDef="Insert">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'ادخال',
                en: 'ُEnter'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            <i
              class="fa-solid {{ element.Insert ? 'fa-check' : 'fa-xmark' }}"
            ></i>
          </td>
        </ng-container>
        <ng-container matColumnDef="Update">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'تعديل',
                en: 'Edit'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            <i
              class="fa-solid {{ element.Update ? 'fa-check' : 'fa-xmark' }}"
            ></i>
          </td>
        </ng-container>
        <ng-container matColumnDef="Delete">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'حذف',
                en: 'Delete'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            <i
              class="fa-solid {{ element.Delete ? 'fa-check' : 'fa-xmark' }}"
            ></i>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="modals.columns.permissions"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: modals.columns.permissions"
          class="duration-300 hover:bg-slate-100"
        ></tr>
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "No result found for " }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>
    <mat-paginator #Permissionspag [pageSizeOptions]="[10, 25]">
    </mat-paginator>
  </div>
</ng-template>

<!-- user  user Status   -->
<ng-template #userStatus let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span
        class="text-2xl"
        [translate]="'name'"
        [translateParams]="{
          ar: 'حالة المستخدم',
          en: 'User Status'
        }"
      >
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <mat-tab-group>
      <!-- personal data -->
      <mat-tab [dir]="'dir' | translate">
        <ng-template mat-tab-label>
          <span
            [translate]="'name'"
            [translateParams]="{
              ar: 'مهام المستخدم',
              en: 'User Task'
            }"
          >
          </span>
        </ng-template>
        <!-- buttons -->
        <div class="flex justify-between gap-2 items-end flex-wrap">
          <div class="flex justify-between gap-2 items-end flex-wrap">
            <div>
              <label class="col-form-label"> {{ "User" | translate }}</label>
              <ng-select
                class="w-full p-0"
                placeholder="{{ 'Chose' | translate }}"
              >
                <ng-option> اختيار</ng-option>
              </ng-select>
            </div>

            <div class="w-fit">
              <label class="col-form-label"> {{ "Search" | translate }}</label>
              <input
                class="form-control"
                (keyup)="applyFilter($event)"
                placeholder="{{ 'search' | translate }} . . ."
                #input
              />
            </div>
          </div>
          <div class="flex gap-2 controler">
            <button
              class="flex gap-1 btn btn-primary"
              (click)="open(forwardProject, '', 'md')"
            >
              <span
                class="hidden md:block"
                [translate]="'name'"
                [translateParams]="{
                  ar: ' تحويل المشاريع المحددة ',
                  en: 'Forward selected projects '
                }"
              ></span>
              <i class="fa-solid fa-rotate-right"></i>
            </button>
          </div>
        </div>

        <div class="overflow-auto max-h-[50vh] mt-3">
          <table
            matSort
            #taskstable
            mat-table
            [dataSource]="modals.rows.tasks"
            class="mat-elevation-z8 rounded-t-xl overflow-hidden"
          >
            <ng-container matColumnDef="select">
              <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox
                  color="warn"
                  (change)="$event ? toggleAllRows() : null"
                  [checked]="selection.tasks.hasValue() && isAllSelected()"
                  [indeterminate]="
                    selection.tasks.hasValue() && !isAllSelected()
                  "
                  [aria-label]="checkboxLabel()"
                >
                </mat-checkbox>
              </th>
              <td mat-cell *matCellDef="let row">
                <mat-checkbox
                  color="warn"
                  (click)="$event.stopPropagation()"
                  (change)="$event ? selection.tasks.toggle(row) : null"
                  [checked]="selection.tasks.isSelected(row)"
                  [aria-label]="checkboxLabel(row)"
                >
                </mat-checkbox>
              </td>
            </ng-container>

            <ng-container matColumnDef="DescriptionAr">
              <th mat-header-cell *matHeaderCellDef>
                {{ "ProjectDescription" | translate }}
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element.DescriptionAr }}
              </td>
            </ng-container>

            <ng-container matColumnDef="ProjectNumber">
              <th mat-header-cell *matHeaderCellDef>
                {{ "Project Number" | translate }}
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element.ProjectNumber }}
              </td>
            </ng-container>
            <ng-container matColumnDef="ProjSubTypeId">
              <th mat-header-cell *matHeaderCellDef>
                <span
                  [translate]="'name'"
                  [translateParams]="{
                    ar: 'النوع',
                    en: 'Type'
                  }"
                ></span>
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element.ProjSubTypeId }}
              </td>
            </ng-container>

            <ng-container matColumnDef="operations">
              <th
                mat-header-cell
                *matHeaderCellDef
                [translate]="'name'"
                [translateParams]="{
                  ar: 'خيارات',
                  en: 'Operations'
                }"
              ></th>
              <td mat-cell *matCellDef="let element">
                <div class="flex gap-1 justify-center py-2">
                  <button
                    (click)="open(forwardProject, '', 'md')"
                    class="min-w-max p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  >
                    <i class="fa-solid fa-rotate-right"></i>
                  </button>
                  <button
                    (click)="open(deleteModal, '', 'md')"
                    class="min-w-max p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  >
                    <i class="fa-solid fa-trash-can"></i>
                  </button>
                </div>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="modals.columns.tasks"></tr>
            <tr
              mat-row
              *matRowDef="let row; columns: modals.columns.tasks"
              (click)="selection.tasks.toggle(row)"
            ></tr>
          </table>
          <mat-paginator #taskstablepaginator [pageSizeOptions]="[10, 25]">
          </mat-paginator>
        </div>
      </mat-tab>

      <mat-tab [dir]="'dir' | translate">
        <ng-template mat-tab-label>
          <span
            [translate]="'name'"
            [translateParams]="{
              ar: 'مشاريع المستخدم',
              en: 'User Project'
            }"
          >
          </span>
        </ng-template>
        <div class="flex justify-between gap-2 items-end flex-wrap">
          <div class="flex justify-between gap-2 items-end flex-wrap">
            <div>
              <label class="col-form-label"> {{ "User" | translate }}</label>
              <ng-select
                class="w-full p-0"
                placeholder="{{ 'Chose' | translate }}"
              >
                <ng-option> اختيار</ng-option>
              </ng-select>
            </div>

            <div class="w-fit">
              <label class="col-form-label"> {{ "Search" | translate }}</label>
              <input
                class="form-control"
                (keyup)="applyFilter($event)"
                placeholder="{{ 'search' | translate }} . . ."
                #input
              />
            </div>
          </div>
          <div class="flex gap-2 controler">
            <button
              class="flex gap-1 btn btn-primary"
              (click)="open(forwardProject, '', 'md')"
            >
              <span
                class="hidden md:block"
                [translate]="'name'"
                [translateParams]="{
                  ar: ' تحويل المشاريع المحددة ',
                  en: 'Forward selected projects '
                }"
              ></span>
              <i class="fa-solid fa-rotate-right"></i>
            </button>
          </div>
        </div>

        <div class="overflow-auto max-h-[50vh] mt-3">
          <table
            matSort
            #projectsTable
            mat-table
            [dataSource]="modals.rows.projects"
            class="mat-elevation-z8 rounded-t-xl overflow-hidden"
          >
            <ng-container matColumnDef="select">
              <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox
                  color="warn"
                  (change)="$event ? toggleAllRowsPro() : null"
                  [checked]="selection.tasks.hasValue() && isAllSelectedPro()"
                  [indeterminate]="
                    selection.projects.hasValue() && !isAllSelectedPro()
                  "
                  [aria-label]="checkboxLabelPro()"
                >
                </mat-checkbox>
              </th>
              <td mat-cell *matCellDef="let row">
                <mat-checkbox
                  color="warn"
                  (click)="$event.stopPropagation()"
                  (change)="$event ? selection.projects.toggle(row) : null"
                  [checked]="selection.projects.isSelected(row)"
                  [aria-label]="checkboxLabelPro(row)"
                >
                </mat-checkbox>
              </td>
            </ng-container>

            <ng-container matColumnDef="ProjectNo">
              <th mat-header-cell *matHeaderCellDef>
                {{ "Project Number" | translate }}
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element.ProjectNo }}
              </td>
            </ng-container>

            <ng-container matColumnDef="CustomerName">
              <th mat-header-cell *matHeaderCellDef>
                {{ "Customer Name" | translate }}
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element.CustomerName }}
              </td>
            </ng-container>

            <ng-container matColumnDef="ProjectTypesName">
              <th mat-header-cell *matHeaderCellDef>
                <span
                  [translate]="'name'"
                  [translateParams]="{
                    ar: 'النوع',
                    en: 'Type'
                  }"
                ></span>
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element.ProjectTypesName }}
              </td>
            </ng-container>

            <ng-container matColumnDef="operations">
              <th
                mat-header-cell
                *matHeaderCellDef
                [translate]="'name'"
                [translateParams]="{
                  ar: 'خيارات',
                  en: 'Operations'
                }"
              ></th>
              <td mat-cell *matCellDef="let element">
                <div class="flex gap-1 justify-center py-2">
                  <button
                    (click)="open(forwardProject, '', 'md')"
                    class="min-w-max p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  >
                    <i class="fa-solid fa-rotate-right"></i>
                  </button>
                  <button
                    (click)="open(deleteModal, '', 'md')"
                    class="min-w-max p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  >
                    <i class="fa-solid fa-trash-can"></i>
                  </button>
                </div>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="modals.columns.projects"></tr>
            <tr
              mat-row
              *matRowDef="let row; columns: modals.columns.projects"
              (click)="selection.projects.toggle(row)"
            ></tr>
          </table>
          <mat-paginator #projectsTablepag [pageSizeOptions]="[10, 25]">
          </mat-paginator>
        </div>
      </mat-tab>

      <mat-tab [dir]="'dir' | translate">
        <ng-template mat-tab-label>
          <span
            [translate]="'name'"
            [translateParams]="{
              ar: 'سيور المستخدم',
              en: 'User Statments'
            }"
          >
          </span>
        </ng-template>

        <div class="flex justify-between gap-2 items-end flex-wrap">
          <div>
            <label class="col-form-label"> {{ "User" | translate }}</label>
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
            >
              <ng-option> اختيار</ng-option>
            </ng-select>
          </div>

          <div class="w-fit">
            <label class="col-form-label"> {{ "Search" | translate }}</label>
            <input
              class="form-control"
              (keyup)="applyFilter($event)"
              placeholder="{{ 'search' | translate }} . . ."
              #input
            />
          </div>
        </div>

        <div class="overflow-auto max-h-[50vh] mt-3">
          <table
            matSort
            #statementsTable
            mat-table
            [dataSource]="modals.rows.statments"
            class="mat-elevation-z8 rounded-t-xl overflow-hidden"
          >
            <ng-container matColumnDef="TaskName">
              <th mat-header-cell *matHeaderCellDef>
                <span
                  [translate]="'name'"
                  [translateParams]="{
                    ar: 'اسم المهمة',
                    en: 'Task Name'
                  }"
                ></span>
              </th>
              <td mat-cell *matCellDef="let element">{{ element.TaskName }}</td>
            </ng-container>

            <ng-container matColumnDef="SettingNo">
              <th mat-header-cell *matHeaderCellDef>
                <span
                  [translate]="'name'"
                  [translateParams]="{
                    ar: 'رقم السير',
                    en: 'Statment Number'
                  }"
                ></span>
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element.SettingNo }}
              </td>
            </ng-container>

            <ng-container matColumnDef="SettingNote">
              <th mat-header-cell *matHeaderCellDef>
                <span
                  [translate]="'name'"
                  [translateParams]="{
                    ar: 'وصف السير',
                    en: 'statment Description'
                  }"
                ></span>
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element.SettingNote }}
              </td>
            </ng-container>

            <ng-container matColumnDef="operations">
              <th
                mat-header-cell
                *matHeaderCellDef
                [translate]="'name'"
                [translateParams]="{
                  ar: 'خيارات',
                  en: 'Operations'
                }"
              ></th>
              <td mat-cell *matCellDef="let element">
                <div class="flex gap-1 justify-center py-2">
                  <button
                    (click)="open(forwardProject, '', 'md')"
                    class="min-w-max p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  >
                    <i class="fa-solid fa-rotate-right"></i>
                  </button>
                  <button
                    (click)="open(deleteModal, '', 'md')"
                    class="min-w-max p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  >
                    <i class="fa-solid fa-trash-can"></i>
                  </button>
                </div>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="modals.columns.payments"></tr>
            <tr
              mat-row
              *matRowDef="let row; columns: modals.columns.payments"
              (click)="selection.projects.toggle(row)"
            ></tr>
          </table>
          <mat-paginator #statementsTablepag [pageSizeOptions]="[10, 25]">
          </mat-paginator>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</ng-template>

<!-- forward modal  -->
<ng-template #forwardProject let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span
        class="text-2xl"
        [translate]="'name'"
        [translateParams]="{
          ar: 'تحويل الي مدير أخر',
          en: 'Exchange to onther maneger'
        }"
      >
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <form #forward="ngForm">
      <div>
        <label class="col-form-label">
          {{ "Maneger Name" | translate }}
          <span class="text-danger">*</span></label
        >
        <ng-select
          class="w-full p-0"
          placeholder="{{ 'Maneger Name' | translate }}"
        >
          <ng-option>اختيار</ng-option>
          <ng-option>اختيار</ng-option>
          <ng-option>اختيار</ng-option>
        </ng-select>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button
      (click)="modal.dismiss()"
      class="btn bg-base text-white"
      type="submit"
      [disabled]="forward.invalid"
    >
      {{ "Save" | translate }}
    </button>
    <button (click)="modal.dismiss()" class="btn btn-secondary">
      {{ "Back" | translate }}
    </button>
  </div>
</ng-template>
