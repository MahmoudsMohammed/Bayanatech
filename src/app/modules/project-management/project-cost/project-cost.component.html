<div class="add-search pb-4">
  <app-navigator [title]="title"></app-navigator>

  <div class="tables-data mt-3 overflow-hidden">


    <!-- buttons -->
    <div class="flex justify-between gap-2 items-center my-3 flex-wrap">
      <div class="w-fit">
        <input class="form-control" (keyup)="applyFilter($event)" placeholder="{{'search' | translate}}" #input />
      </div>
      <div class="flex gap-2 controler">

        <button class="flex gap-1 btn btn-secondary" (click)="searchBox.open = !searchBox.open">
          <span class="hidden md:block" [translate]="'name'" [translateParams]="{
              ar: 'بحث',
              en: 'Search'
            }">
          </span>
          <i class="fa-solid fa-user-tag"></i>
        </button>
        <button class="flex gap-1 btn btn-primary">
          <span class="hidden md:block">{{'Print'|translate}}</span>
          <i class="fa-solid fa-print"></i>
        </button>
      </div>
    </div>

    <!-- search box -->
    <form class="flex flex-wrap gap-2 items-end my-3" #searchForm="ngForm" [@fade] *ngIf="searchBox.open">
      <button class="btn btn-primary" (click)="data.filter.enable = !data.filter.enable" [translate]="'name'"
        [translateParams]="{
                      ar: 'فلترة بالوقت',
                      en: 'Time Filter'
                    }"></button>
      <div class="form-group timeInput" *ngIf="data.filter.enable">
        <input [ngModelOptions]="{standalone: true}" placeholder="{{ 'Chose Date' | translate }}"
          [(ngModel)]="data.filter.date" type="text" class="form-control" bsDaterangepicker #dpr="bsDaterangepicker" />
      </div>
      <div class="flex-grow">
        <label [translate]="'name'" [translateParams]="{
            ar: 'نوع البحث',
            en: 'Search Type'
          }">
        </label>
        <ng-select class="w-full p-0 mt-2.5" [(ngModel)]="searchBox.searchType" [ngModelOptions]="{ standalone: true }">
          <ng-option *ngFor="let type of searchBox.searchTypes" [value]="type" [translate]="'name'" [translateParams]="{
              ar: type.name.ar,
              en: type.name.en
            }"></ng-option>
        </ng-select>
      </div>

      <div *ngIf="searchBox.searchType?.id == 1">
        <label for="searchBox" class="form-label" [translate]="'name'" [translateParams]="{
            ar: searchBox.searchType.name.ar,
            en: searchBox.searchType.name.en
          }"></label>
        <input type="text" class="form-control" id="searchBox"
          placeholder="{{ searchBox.searchType.en | translate }}" />
      </div>
      <div *ngIf="searchBox.searchType?.id == 2">
        <label for="ProjectNumber" class="form-label" [translate]="'name'" [translateParams]="{
            ar: 'رقم المشروع',
            en: 'Project Number'
          }"></label>
        <input type="text" class="form-control" id="ProjectNumber" placeholder="رقم المشروع" />
      </div>

      <div *ngIf="searchBox.searchType?.id == 3">
        <label [translate]="'name'" [translateParams]="{
                  ar: 'نوع المشروع',
                  en: 'Search Type'
                }">
        </label>
        <ng-select class="w-full p-0 mt-2.5">
          <ng-option>مشروع</ng-option>
          <ng-option>مشروع</ng-option>
          <ng-option>مشروع</ng-option>
          <ng-option>مشروع</ng-option>
        </ng-select>
      </div>
      <div *ngIf="searchBox.searchType?.id == 3">
        <label [translate]="'name'" [translateParams]="{
                  ar: 'نوع المشروع الفرعى',
                  en: 'Search Type'
                }">
        </label>
        <ng-select class="w-full p-0 mt-2.5">
          <ng-option>مشروع</ng-option>
          <ng-option>مشروع</ng-option>
          <ng-option>مشروع</ng-option>
          <ng-option>مشروع</ng-option>
        </ng-select>
      </div>


      <button class="flex gap-1 btn btn-secondary" style="display: flex" type="submit">
        <span [translate]="'name'" [translateParams]="{
            ar: 'بحث',
            en: 'Search'
          }">
        </span>
        <i class="fa-solid fa-user-tag"></i>
      </button>
    </form>

    <!-- table -->
    <div class="overflow-auto">
      <table mat-table [dataSource]="data.projects" matSort class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max">
        <!-- name Column -->
        <ng-container matColumnDef="projectNumber">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                ar: 'رقم المشروع',
                en: 'Project Number'
              }"></span>
          </th>
          <td mat-cell *matCellDef="let element">

            {{element.ProjectNo}}
          </td>
        </ng-container>
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                ar: 'العميل',
                en: 'Customer'
              }"></span>
          </th>
          <td mat-cell *matCellDef="let element">

            {{element.CustomerName}}
          </td>
        </ng-container>

        <!-- nationalId Column -->
        <ng-container matColumnDef="projectType">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                ar: 'نوع المشروع',
                en: 'Project Type'
              }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.ProjectTypesName }}
          </td>
        </ng-container>

        <!-- customerType Column -->
        <ng-container matColumnDef="subProjectType">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                ar: 'نوع المشروع الفرعى',
                en: 'Sub Project Type'
              }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.ProjectSubTypeName }}
          </td>
        </ng-container>
        <!-- email Column -->
        <ng-container matColumnDef="projectName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                ar: 'اسم المشروع',
                en: 'Project Name'
              }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.ProjectDescription }}
          </td>
        </ng-container>
        <!-- phone Column -->
        <ng-container matColumnDef="income">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                ar: 'الايرادات',
                en: 'Income'
              }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.CostE }}
          </td>
        </ng-container>
        <!-- mobile Column -->
        <ng-container matColumnDef="cost">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                ar: 'المصروفات',
                en: 'Cost'
              }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.CostS }}
          </td>
        </ng-container>


        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

        <tr mat-row *matRowDef="let row; columns: displayedColumns" class="duration-300 hover:bg-slate-100"></tr>
        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "No result found for " }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>
    <mat-paginator [pageSizeOptions]="[10, 25]"> </mat-paginator>
  </div>
</div>
