<div class="add-search pb-4">
  <app-navigator [title]="title"></app-navigator>

  <div class="tables-data mt-3 overflow-hidden">
    <div class="flex gap-2 justify-start flex-wrap items-end">
      <div class="max-w-xs flex-grow">
        <label class="col-form-label"> {{ "Assigned to" | translate }}</label>
        <ng-select
          class="w-full p-0"
          placeholder="{{ 'Assigned to' | translate }}"
          [(ngModel)]="data.selected"
          [ngModelOptions]="{ standalone: true }"
        >
          <ng-option
            [value]="1"
            [translate]="'name'"
            [translateParams]="{ ar: 'خيار', en: 'choose' }"
          >
          </ng-option>
        </ng-select>
      </div>
      <button
        class="btn btn-primary"
        (click)="data.filter.enable = !data.filter.enable"
        [translate]="'name'"
        [translateParams]="{
          ar: 'فلترة بالوقت',
          en: 'Time Filter'
        }"
      ></button>
      <div class="form-group timeInput" *ngIf="data.filter.enable">
        <input
          placeholder="{{ 'Chose Date' | translate }}"
          [(ngModel)]="data.filter.date"
          type="text"
          class="form-control"
          bsDaterangepicker
          #dpr="bsDaterangepicker"
        />
      </div>
      <div class="w-fit">
        <input
          class="form-control"
          (keyup)="applyFilter($event)"
          placeholder="{{ 'search' | translate }}"
          #input
        />
      </div>
    </div>

    <!-- buttons -->
    <div class="flex justify-end gap-2 items-center my-3 flex-wrap">
      <div class="flex gap-2 justify-end s controler">
        <button
          (click)="modalDetails.type = 'Add new supervision'; dataModal.show()"
          class="flex gap-1 btn btn-primary"
        >
          <span class="hidden md:block">{{
            "Add Supervision" | translate
          }}</span>
          <i class="fa-solid fa-plus"></i>
        </button>
      </div>
    </div>

    <!-- table -->
    <div class="overflow-auto">
      <table
        #dataTable
        mat-table
        [dataSource]="dataSource"
        matSort
        class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max"
      >
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'العميل',
                en: 'Customer'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.CustomerName }}
          </td>
        </ng-container>

        <ng-container matColumnDef="projectNumber">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'رقم المشروع',
                en: 'Project Number'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.ProjectNo }}
          </td>
        </ng-container>
        <ng-container matColumnDef="orderNumber">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'رقم أمر الاشراف ',
                en: 'Supervision order number'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.Number }}
          </td>
        </ng-container>
        <ng-container matColumnDef="stage">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'المرحلة',
                en: 'stage'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.PhaseName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="assignedTo">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'المكلف بها',
                en: 'assigned to it'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.ReceivedUserName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="assignedDate">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'تاريخ التكليف',
                en: 'Commissioning date'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.SuperDateConfirm }}
          </td>
        </ng-container>
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'الحالة',
                en: 'status'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.SuperStatusName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="operations">
          <th
            mat-header-cell
            *matHeaderCellDef
            [translate]="'name'"
            [translateParams]="{
              ar: 'خيارات',
              en: 'Operations'
            }"
          ></th>
          <td mat-cell *matCellDef="let element">
            <div class="flex gap-1 justify-center py-2">
              <button
                class="min-w-max p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="availbleModal.show()"
              >
                <i class="fa-solid fa-paper-plane"></i>
              </button>
              <button
                class="min-w-max p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="
                  modalDetails.type = 'Edit supervision'; dataModal.show()
                "
              >
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                class="min-w-max p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="deleteModal.show()"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
              <button
                class="min-w-max p-2 bg-neutral-100 hover:bg-neutral-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="phasedetails.show()"
              >
                <i class="fa-solid fa-circle-info"></i>
              </button>
              <button
                class="min-w-max p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="emailModal.show()"
              >
                <i class="fa-solid fa-at"></i>
              </button>
              <button
                class="min-w-max p-2 bg-green-100 hover:bg-green-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="whatsModal.show()"
              >
                <i class="fa-brands fa-whatsapp"></i>
              </button>
              <button
                class="min-w-max p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-print"></i>
              </button>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
          class="duration-300 hover:bg-slate-100"
        ></tr>
        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "No result found for " }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>
    <mat-paginator #MatPaginator [pageSizeOptions]="[10, 25]"> </mat-paginator>
  </div>
</div>

<!-- modals -->
<div
  class="modal fade ngxModal center"
  bsModal
  #availbleModal="bs-modal"
  tabindex="-1"
  role="dialog"
>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل انت متأكد من اتاحة طلعة الاشراف',
        en: 'Are you sure supervision is available ?'
      }"
    ></p>
    <div class="flex items-start justify-between flex-wrap mb-5">
      <div class="mt-4 text-center" style="border-inline-end:1px solid rgba(0, 0, 0, 0.2)">
        <h3 class="text-base">
          {{ "Customer notice" | translate }}
        </h3>

        <div class="mb-2 endNotice">
          <mat-checkbox name="checkedEmail" [(ngModel)]="checkedEmail">
          </mat-checkbox>
          <button
            [title]="'Send notice via e-mail' | translate"
            class="min-w-max p-2 bg-green-100 hover:bg-green-500 rounded-lg duration-300 hover:text-white aspect-square w-10 mx-2"
          >
            <i class="fa-solid fa-at"></i>
          </button>
          <span *ngIf="checkedEmail">test@mail.com</span>
        </div>

        <div class="endNotice">
          <mat-checkbox name="checkedPhone" [(ngModel)]="checkedPhone">
          </mat-checkbox>
          <button
            [title]="'Sending notice via mobile number' | translate"
            class="min-w-max p-2 bg-blue-100 hover:bg-blue-500 rounded-lg duration-300 hover:text-white aspect-square w-10 mx-2"
          >
            <i class="fa-solid fa-comment-sms"></i>
          </button>
          <span *ngIf="checkedPhone">520123451</span>
        </div>
      </div>

      <div class="mt-4 text-center">
        <h3 class="text-base">
          {{ "Notice to the responsible engineer" | translate }}
        </h3>

        <div class="mb-2 endNotice">
          <mat-checkbox name="checkedEmail" [(ngModel)]="checkedEmailAdmin">
          </mat-checkbox>
          <button
            [title]="'Send notice via e-mail' | translate"
            class="min-w-max p-2 bg-green-100 hover:bg-green-500 rounded-lg duration-300 hover:text-white aspect-square w-10 mx-2"
          >
            <i class="fa-solid fa-at"></i>
          </button>
          <span *ngIf="checkedEmailAdmin">abdelrhmanyasser@mail.com</span>
        </div>

        <div class="endNotice">
          <mat-checkbox name="checkedPhone" [(ngModel)]="checkedPhoneAdmin">
          </mat-checkbox>
          <button
            [title]="'Sending notice via mobile number' | translate"
            class="min-w-max p-2 bg-blue-100 hover:bg-blue-500 rounded-lg duration-300 hover:text-white aspect-square w-10 mx-2"
          >
            <i class="fa-solid fa-comment-sms"></i>
          </button>
          <span *ngIf="checkedPhoneAdmin">520123451</span>
        </div>
      </div>
    </div>
    <div class="flex gap-2 justify-end">
      <button
        type="button"
        mat-raised-button
        class="bg-base text-white"
        (click)="availableSupervision()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="availbleModal.hide()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</div>

<div
  class="modal fade ngxModal center"
  #deleteModal="bs-modal"
  bsModal
  tabindex="-1"
  role="dialog"
>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-end">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="confirmDelete()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="deleteModal.hide()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</div>

<div
  class="modal fade ngxModal edit"
  bsModal
  #dataModal="bs-modal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="asdw"
>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ modalDetails?.type | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="dataModal.hide()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <ng-container>
      <form
        class="modal-form"
        novalidate="novalidate"
        data-select2-id="SupervisionsForm"
      >
        <div class="grid lg:grid-cols-3 md:grid-cols-2 gap-4">
          <div class="form-group">
            <label for="" class="">
              {{ "chose client" | translate }}
              <span class="text-danger">*</span></label
            >
            <select
              id="ProCustomerSelectID"
              dir="auto"
              name="ProCustomerSelectID"
              class="form-control select2-hidden-accessible"
              tabindex="-1"
              aria-hidden="true"
              data-select2-id="ProCustomerSelectID"
            >
              <option selected="" value="" data-select2-id="101">
                --{{ "Chose" | translate }}--
              </option>
              <option value="3" data-select2-id="111">اسماعيل(VIP)</option>
              <option value="21" data-select2-id="112">
                Al fa United (VIP)
              </option>
              <option value="1" data-select2-id="113">يوسف(VIP)</option>
              <option value="24" data-select2-id="114">Abdulqahhar(*)</option>
              <option value="28" data-select2-id="115">sameer(*)</option>
              <option value="6" data-select2-id="116">شركة بيانلتك(VIP)</option>
              <option value="12" data-select2-id="117">مصطفى (*)</option>
              <option value="17" data-select2-id="118">123(VIP)</option>
              <option value="2" data-select2-id="119">محمود نافع(VIP)</option>
              <option value="4" data-select2-id="120">محمود(VIP)</option>
              <option value="35" data-select2-id="121">ماضي الماضي(***)</option>
              <option value="30" data-select2-id="122">
                محمد عبداللطيف(VIP)
              </option>
              <option value="39" data-select2-id="123">اكنان(**)</option>
              <option value="40" data-select2-id="124">شيغالي حسين(**)</option>
            </select>
          </div>
          <div class="form-group">
            <label for="" class=""
              >{{ "The project" | translate }}
              <span class="text-danger">*</span></label
            >
            <select
              id="ProjectSelectID"
              dir="auto"
              name="ProjectSelectID"
              class="form-control select2-hidden-accessible"
              data-select2-id="ProjectSelectID"
              tabindex="-1"
              aria-hidden="true"
            >
              <option selected="" value="" data-select2-id="103">
                --{{ "Chose" | translate }}--
              </option>
              <option value="54">123123 - اسماعيل(VIP)</option>
              <option value="4">2022-4 - اسماعيل(VIP)</option>
              <option value="84">2022-66 - اسماعيل(VIP)</option>
            </select>
          </div>
          <div class="form-group">
            <label for="" class="">
              {{ "Choose the stage" | translate }}
              <span class="text-danger">*</span>
            </label>
            <select
              class="form-control select2-hidden-accessible"
              id="PhasesSelectId"
              name="PhasesSelectId"
              tabindex="-1"
              aria-hidden="true"
              data-select2-id="PhasesSelectId"
            >
              <option selected="" value="" data-select2-id="84">
                --{{ "Chose" | translate }}--
              </option>
              <option value="1" data-select2-id="127">مرحلة بدأ المشروع</option>
              <option value="2" data-select2-id="128">
                مرحلة ما قبل صب الأساسات
              </option>
              <option value="3" data-select2-id="129">
                مرحلة بعد صب الأساسات
              </option>
              <option value="4" data-select2-id="130">
                مرحلة ما قبل صب الميدات
              </option>
              <option value="5" data-select2-id="131">
                مرحلة بعد صب الميدات
              </option>
              <option value="6" data-select2-id="132">
                مرحلة قبل صب الأعمدة
              </option>
              <option value="7" data-select2-id="133">
                مرحلة فحص ما قبل صب سقف البلاطة الخرسانية لكل دور
              </option>
              <option value="8" data-select2-id="134">
                مرحلة بعد صب سقف كل دور
              </option>
              <option value="9" data-select2-id="135">
                مرحلة نهاية العظم وبداية الإلكتروميكانيك
              </option>
              <option value="10" data-select2-id="136">
                مرحلة نهاية الواجهات وبداية أعمال العزل
              </option>
              <option value="11" data-select2-id="137">
                مرحلة نهاية تمديد الإلكتروميكانيك
              </option>
              <option value="12" data-select2-id="138">
                مرحلة البلاط وتركيب النوافذ والأبواب
              </option>
              <option value="13" data-select2-id="139">
                مرحلة التفتيش النهائي
              </option>
              <option value="14" data-select2-id="140">test</option>
              <option value="15" data-select2-id="141">سلامة</option>
              <option value="16" data-select2-id="142">مرحلة أمن وسلامة</option>
              <option value="17" data-select2-id="143">123</option>
              <option value="18" data-select2-id="144">الجبسيات</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-control-lable"
              >{{ "Date of visit" | translate }}
            </label>
            <input
              type="text"
              placeholder="{{ 'Chose Date' | translate }}"
              class="form-control"
              bsDatepicker
            />
          </div>
        </div>
        <div>
          <div
            class="flex gap-2 items-end justify-center mt-3 lg:col-span-4 md:col-span-2"
          >
            <button
              type="button"
              class="btn btn-primary"
              (click)="fileTypeModal.show()"
            >
              {{ "Add a new stage" | translate }}
            </button>
            <button
              type="button"
              class="btn btn-warning"
              id="PhasesDrtailsBtn"
              (click)="editphasedetails.show()"
            >
              {{ "Stage details" | translate }}
            </button>
          </div>
        </div>
        <hr class="w-3/4 mx-auto my-4" />
        <div class="grid lg:grid-cols-3 md:grid-cols-2 gap-3">
          <div class="form-group">
            <label for="date" class="">
              {{ "Supervision Order No" | translate }}
              <span class="text-danger">*</span></label
            >
            <input
              class="form-control"
              type="text"
              id="SupervisionNumber"
              disabled=""
              name="SupervisionNumber"
              placeholder="{{ 'Supervision Order No' | translate }}    "
            />
          </div>
          <div class="form-group">
            <label class=""> {{ "his history" | translate }}</label>
            <input
              type="text"
              placeholder="{{ 'Chose Date' | translate }}"
              class="form-control"
              bsDatepicker
            />
          </div>
          <div class="form-group">
            <label for="date" class="">
              {{ "Contractor name" | translate }}
              <span class="text-danger">*</span></label
            >
            <select
              class="form-control select2-hidden-accessible"
              id="WorkerNameSelectId"
              name="WorkerNameSelectId"
              tabindex="-1"
              aria-hidden="true"
              data-select2-id="WorkerNameSelectId"
            >
              <option selected="" value="" data-select2-id="107">
                --{{ "Chose" | translate }}--
              </option>
              <option value="1">مؤسسة المقاول المتعاون</option>
            </select>
          </div>
          <div class="form-group">
            <label for="" class="">
              {{ "Assigned to" | translate }}<span class="text-danger">*</span>
            </label>
            <select
              class="form-control select2-hidden-accessible"
              id="RecevierSelectId"
              name="RecevierSelectId"
              width="87%"
              tabindex="-1"
              aria-hidden="true"
              data-select2-id="RecevierSelectId"
            >
              <option selected="" value="" data-select2-id="63">
                --{{ "Chose" | translate }}--
              </option>
              <option value="2">أبو أحمد</option>
              <option value="3">محمد هلهل</option>
              <option value="4">ايهاب رجب</option>
              <option value="6">test</option>
              <option value="44">إسماعيل رياض</option>
              <option value="46">شذى</option>
            </select>
          </div>
          <div class="form-group">
            <label for="date" class=""
              >{{ "Collaborative office" | translate
              }}<span class="text-danger">*</span></label
            >
            <input
              class="form-control"
              disabled=""
              type="text"
              id="OfficeName"
              autocomplete="off"
              name="OfficeName"
              placeholder="{{ 'Collaborative office' | translate }}  "
            />
          </div>
          <div class="form-group">
            <label for="date" class=""
              >{{ "license number" | translate
              }}<span class="text-danger">*</span></label
            >
            <input
              class="form-control"
              disabled=""
              type="text"
              id="LicenseNumber"
              name="LicenseNumber"
              placeholder="{{ 'license number' | translate }}  "
            />
          </div>
          <div class="form-group">
            <label for="date" class=""
              >{{ "No. planned" | translate
              }}<span class="text-danger">*</span></label
            >
            <input
              class="form-control"
              disabled=""
              type="text"
              id="OutlineNo"
              name="OutlineNo"
              placeholder="{{ 'No. planned' | translate }}  "
            />
          </div>
          <div class="form-group">
            <label for="date" class=""
              >{{ "piece number" | translate
              }}<span class="text-danger">*</span></label
            >
            <input
              class="form-control"
              disabled=""
              type="text"
              id="PieceNo"
              autocomplete="off"
              name="PieceNo"
              placeholder="  {{ 'piece number' | translate }}"
            />
          </div>
          <div class="form-group">
            <label for="date" class=""
              >{{ "honesty" | translate
              }}<span class="text-danger">*</span></label
            >
            <select
              class="form-control select2-hidden-accessible"
              id="MunicipalSelectId"
              name="MunicipalSelectId"
              tabindex="-1"
              aria-hidden="true"
              data-select2-id="MunicipalSelectId"
            >
              <option selected="" value="" data-select2-id="24">
                --{{ "Chose" | translate }}--
              </option>
              <option value="1">أمانة الرياض</option>
            </select>
          </div>
          <div class="form-group">
            <label for="date" class=""
              >{{ "Municipal" | translate
              }}<span class="text-danger">*</span></label
            >
            <select
              class="form-control select2-hidden-accessible"
              id="SubMunicipalitySelectId"
              name="SubMunicipalitySelectId"
            >
              <option selected="" value="" data-select2-id="28">
                --{{ "Chose" | translate }}--
              </option>
              <option value="1">شمال الرياض</option>
            </select>
          </div>
          <div class="form-group">
            <label for="date" class=""
              >{{ "construction type" | translate
              }}<span class="text-danger">*</span></label
            >
            <select
              class="form-control select2-hidden-accessible"
              id="ProBuildingTypeSelectId"
              name="ProBuildingTypeSelectId"
              tabindex="-1"
              aria-hidden="true"
              data-select2-id="ProBuildingTypeSelectId"
            >
              <option selected="" value="" data-select2-id="38">
                --{{ "Chose" | translate }}--
              </option>
              <option value="1">فيلا سكنية</option>
              <option value="2">مجمع طبي</option>
              <option value="3">اشراف</option>
              <option value="4">تخطيط أرض</option>
            </select>
          </div>
          <div class="form-group">
            <label for="date" class=""
              >{{ "Construction description" | translate
              }}<span class="text-danger">*</span></label
            >
            <input
              class="form-control"
              type="text"
              id="ProBuildingDisc"
              autocomplete="off"
              name="ProBuildingDisc"
              placeholder="{{ 'Construction description' | translate }}  "
            />
          </div>
          <div class="form-group">
            <label for="date" class=""
              >{{ "Neighborhood" | translate
              }}<span class="text-danger">*</span></label
            >
            <input
              class="form-control"
              disabled=""
              type="text"
              id="DistrictName"
              autocomplete="off"
              name="DistrictName"
              placeholder="{{ 'Neighborhood' | translate }}"
            />
          </div>
          <div class="form-group">
            <label for="date" class=""
              >{{ "The number of turns" | translate
              }}<span class="text-danger">*</span></label
            >
            <input
              class="form-control"
              disabled=""
              type="text"
              id="AdwARid"
              autocomplete="off"
              name="AdwARid"
              placeholder="  {{ 'The number of turns' | translate }}"
            />
          </div>
        </div>
      </form>
      <div class="border-t pt-2 mt-3 border-neutral-300">
        <div class="flex gap-2 justify-end">
          <button class="btn bg-base text-white">
            {{ "Save" | translate }}
          </button>
          <button (click)="dataModal.hide()" class="btn btn-secondary">
            {{ "Back" | translate }}
          </button>
        </div>
      </div>
    </ng-container>
  </div>
</div>

<div
  class="modal fade ngxModal"
  bsModal
  #fileTypeModal="bs-modal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-static-name2"
>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl"> {{ "New supervision stage" | translate }} </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="fileTypeModal?.hide()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body text-center">
    <form #addFileType="ngForm" class="grid grid-cols-1 md:grid-cols-2 gap-2">
      <div class="form-group">
        <label for="CustomerNameArtxt3" class="col-form-label block">
          {{ "nameAr" | translate }}
          <span class="text-danger">*</span></label
        >
        <input
          required
          #CustomerNameAr="ngModel"
          ngModel
          [(ngModel)]="data.stage.NameAr"
          class="form-control"
          type="text"
          id="CustomerNameArtxt3"
          name="CustomerNameArtxt3"
          autocomplete="off"
          [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
        />
      </div>
      <div class="form-group">
        <label for="CustomerNameEntxt3" class="col-form-label block">
          {{ "nameEn" | translate }}
          <span class="text-danger">*</span></label
        >
        <div style="display: inline-flex; width: 100%">
          <input
            required
            #CustomerNameEnValue
            #CustomerNameEn="ngModel"
            [(ngModel)]="data.stage.NameEn"
            ngModel
            class="form-control"
            type="text"
            id="CustomerNameEntxt3"
            name="CustomerNameEntxt3"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
          <a
            class="btn"
            id="CopyCustomerName2"
            (click)="CustomerNameEnValue.value = CustomerNameAr.value"
            ><i class="fa fa-copy"></i
          ></a>
        </div>
      </div>
    </form>
    <div class="max-h-80 overflow-auto px-2 mt-4">
      <table class="table table-hover">
        <thead class="bg-base text-white">
          <tr>
            <th style="max-width: 300px">{{ "nameAr" | translate }}</th>
            <th>{{ "nameEn" | translate }}</th>
            <th
              [translate]="'name'"
              [translateParams]="{
                ar: 'خيارات',
                en: 'Operations'
              }"
            ></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let type of data.phaseDetails">
            <td style="max-width: 300px">{{ type.NameAr }}</td>
            <td>{{ type.NameEn || "-" }}</td>
            <td class="flex gap-2 justify-center">
              <button
                class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="
                  data.stage.NameAr = type.NameAr;
                  data.stage.NameEn = type.NameEn;
                  data.stage.Id = type.PhaseDetailesId
                "
              >
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                (click)="deleteSupervision.show()"
                class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="flex gap-2 justify-end s mt-3 pt-3 border-t border-neutral-300">
      <button
        class="btn bg-base text-white"
        type="submit"
        [disabled]="addFileType.invalid"
        (click)="fileTypeModal?.hide()"
      >
        {{ "Save" | translate }}
      </button>
      <button (click)="fileTypeModal?.hide()" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
    </div>
  </div>
</div>

<div
  class="modal fade ngxModal center"
  bsModal
  #deleteSupervision="bs-modal"
  tabindex="-1"
  role="dialog"
>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-end">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="confirmDelete()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="deleteSupervision.hide()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</div>

<div
  class="modal fade ngxModal"
  bsModal
  #editphasedetails="bs-modal"
  tabindex="-1"
  role="dialog"
>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "Oversight flight details" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="editphasedetails?.hide()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <div class="overflow-auto max-h-96 mt-4 px-2">
      <table>
        <tr class="bg-base text-white">
          <th>{{ "stage items" | translate }}</th>
        </tr>
        <tr *ngFor="let phase of data.supervisionDetails">
          <td>{{ phase.NameAr }}</td>
        </tr>
      </table>
    </div>
  </div>

  <div class="modal-footer gap-2">
    <button
      type="button"
      (click)="editphasedetails.hide()"
      mat-raised-button
      color="basic"
    >
      {{ "Back" | translate }}
    </button>
  </div>
</div>

<div
  class="modal fade ngxModal"
  bsModal
  #phasedetails="bs-modal"
  tabindex="-1"
  role="dialog"
>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "Oversight flight details" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="phasedetails?.hide()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <div class="flex gap-2 justify-end">
      <div>
        <span class="text-base">{{ "Customer Name" | translate }} : </span>
        <span>عاصم الحلباوى</span>
      </div>
      <div>
        <span class="text-base">{{ "stage name" | translate }} :</span>
        <span>مرحلة بعد صب الأساسات</span>
      </div>
    </div>
    <div class="overflow-auto max-h-96 mt-4 px-2">
      <table class="w-full">
        <tr class="bg-base text-white">
          <th>{{ "receiving stage" | translate }}</th>
          <th>{{ "Notes" | translate }}</th>
          <th>{{ "status" | translate }}</th>
          <th>{{ "show" | translate }}</th>
        </tr>
        <tr *ngFor="let phase of data.supervisionDetails">
          <td>
            <textarea
              class="resize-none focus:outline-0 w-full min-w-max"
              type="text"
              [(ngModel)]="phase.NameAr"
            >
            </textarea>
          </td>
          <td>
            <input
              class="focus:outline-0 max-w-fit"
              type="text"
              [(ngModel)]="phase.Note"
              value="{{ phase.Note || '-' }}"
            />
          </td>
          <td>
            <div
              class="p-1 rounded-lg {{
                phase.IsRead == 2
                  ? 'text-neutral-500  '
                  : phase.IsRead == 1
                  ? '  text-green-500'
                  : '  text-red-500'
              }}"
            >
              <i *ngIf="phase.IsRead == 0" class="fa-solid fa-circle-xmark"></i>
              <i *ngIf="phase.IsRead == 1" class="fa-solid fa-circle-check"></i>
              <i *ngIf="phase.IsRead == 2" class="fa-solid fa-book-open"></i>
            </div>
          </td>
          <td>
            <a href="{{ phase.ImageUrl }}" class="text-neutral-500">
              <i *ngIf="phase.ImageUrl" class="fa-solid fa-eye"></i>
            </a>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <div class="modal-footer gap-2">
    <button
      type="button"
      mat-raised-button
      color="primary"
      (click)="confirmDelete()"
    >
      {{ "Save" | translate }}
    </button>
    <button
      type="button"
      (click)="phasedetails.hide()"
      mat-raised-button
      color="basic"
    >
      {{ "Back" | translate }}
    </button>
  </div>
</div>

<div
  class="modal fade ngxModal center"
  bsModal
  #emailModal="bs-modal"
  tabindex="-1"
  role="dialog"
>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{
        "Do you want to send an email?" | translate
      }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="emailModal.hide()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <form action="">
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          value=""
          id="flexCheckCheckedasd"
          checked
        />
        <label class="form-check-label" for="flexCheckCheckedasd">
          {{ "Client" | translate }}
        </label>
      </div>
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          value=""
          id="flexCheckChecked22"
          checked
        />
        <label class="form-check-label" for="flexCheckChecked22">
          {{ "contractor" | translate }}
        </label>
      </div>
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          value=""
          id="flexCheckChecked12"
          checked
        />
        <label class="form-check-label" for="flexCheckChecked12">
          {{ "cooperating office" | translate }}
        </label>
      </div>
    </form>
  </div>
  <div class="modal-footer gap-2">
    <button
      type="button"
      mat-raised-button
      color="primary"
      (click)="confirmDelete()"
    >
      {{ "Send" | translate }}
    </button>
    <button
      type="button"
      (click)="emailModal.hide()"
      mat-raised-button
      color="basic"
    >
      {{ "Back" | translate }}
    </button>
  </div>
</div>

<div
  class="modal fade ngxModal center"
  bsModal
  #whatsModal="bs-modal"
  tabindex="-1"
  role="dialog"
>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{
        "Do you want to send WhatsApp?" | translate
      }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="whatsModal.hide()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <form action="">
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          value=""
          id="flexCheckCheckedasd"
          checked
        />
        <label class="form-check-label" for="flexCheckCheckedasd">
          {{ "Client" | translate }}
        </label>
      </div>
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          value=""
          id="flexCheckChecked22"
          checked
        />
        <label class="form-check-label" for="flexCheckChecked22">
          {{ "contractor" | translate }}
        </label>
      </div>
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          value=""
          id="flexCheckChecked12"
          checked
        />
        <label class="form-check-label" for="flexCheckChecked12">
          {{ "cooperating office" | translate }}
        </label>
      </div>
    </form>
  </div>
  <div class="modal-footer gap-2">
    <button
      type="button"
      mat-raised-button
      color="primary"
      (click)="confirmDelete()"
    >
      {{ "Send" | translate }}
    </button>
    <button
      type="button"
      (click)="whatsModal.hide()"
      mat-raised-button
      color="basic"
    >
      {{ "Back" | translate }}
    </button>
  </div>
</div>
