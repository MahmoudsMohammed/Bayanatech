<div class="add-search pb-4">
  <app-navigator [title]="title"></app-navigator>

  <div class="tables-data mt-3 overflow-hidden">

    <div class="flex gap-2 flex-wrap items-end">
      <div class="max-w-xs flex-grow">
        <label class="col-form-label"> {{ "Customer" | translate }}</label>
        <ng-select class="w-full p-0" placeholder="{{ 'Chose' | translate }}" [(ngModel)]="data.selected"
          [ngModelOptions]="{ standalone: true }">
          <ng-option [value]="1">
            {{ 'Chose' | translate }}
          </ng-option>

        </ng-select>
      </div>
      <button class="btn btn-primary" (click)="data.filter.enable = !data.filter.enable" [translate]="'name'"
        [translateParams]="{
          ar: 'فلترة بالوقت',
          en: 'Time Filter'
        }"></button>
      <div class="form-group timeInput" *ngIf="data.filter.enable">
        <input placeholder="{{ 'Chose Date' | translate }}" [(ngModel)]="data.filter.date" type="text"
          class="form-control" bsDaterangepicker #dpr="bsDaterangepicker" />
      </div>

      <div class="w-fit">
        <input class="form-control" (keyup)="applyFilter($event)" placeholder="{{'search' | translate}}" #input />
      </div>

    </div>

    <!-- buttons -->
    <div class="flex justify-end gap-2 items-center my-3 flex-wrap">

      <div class="flex gap-2 controler">


        <button class="flex gap-1 btn btn-primary">
          <span class="hidden md:block">{{'Print'|translate}}</span>
          <i class="fa-solid fa-print"></i>
        </button>
      </div>
    </div>


    <!-- table -->
    <div class="overflow-auto">
      <table mat-table [dataSource]="data.userProjects" matSort
        class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max">


        <ng-container matColumnDef="projectNumber">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                ar: 'رقم المشروع',
                en: 'Project Number'
              }"></span>
          </th>
          <td mat-cell *matCellDef="let element">

            {{element.ProjectNo}}
          </td>
        </ng-container>
        <ng-container matColumnDef="projectStart">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                ar: 'بداية المشروع',
                en: 'Project Start'
              }"></span>
          </th>
          <td mat-cell *matCellDef="let element">

            {{element.FirstProjectDate}}
          </td>
        </ng-container>
        <ng-container matColumnDef="projectEnd">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                ar: 'نهاية المشروع',
                en: 'Project End'
              }"></span>
          </th>
          <td mat-cell *matCellDef="let element">

            {{element.FirstProjectExpireDate}}
          </td>
        </ng-container>

        <!-- nationalId Column -->
        <ng-container matColumnDef="projectType">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                ar: 'نوع المشروع',
                en: 'Project Type'
              }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.ProjectTypesName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="subProjectType">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                          ar: 'نوع المشروع الفرعى',
                          en: 'Sub Project Type'
                        }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.ProjectSubTypeName }}
          </td>
        </ng-container>


        <!-- mobile Column -->
        <ng-container matColumnDef="percentage">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                ar: 'نسبة الانجاز',
                en: 'Done Percentage'
              }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            <!-- {{ element.TaskStart }} -->
            50%
          </td>
        </ng-container>
        <ng-container matColumnDef="projectPeriod">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                ar: 'مدة المشروع',
                en: 'Project Period'
              }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.TimeStr }}
          </td>
        </ng-container>
        <ng-container matColumnDef="projectDescription">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                ar: 'وصف المشروع',
                en: 'Project Description'
              }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.ProjectDescription }}
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

        <tr mat-row *matRowDef="let row; columns: displayedColumns" class="duration-300 hover:bg-slate-100"></tr>
        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "No result found for " }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>
    <mat-paginator [pageSizeOptions]="[10, 25]"> </mat-paginator>
  </div>
</div>
